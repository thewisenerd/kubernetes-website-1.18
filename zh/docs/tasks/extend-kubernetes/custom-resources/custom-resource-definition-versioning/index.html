<!doctype html><html lang=zh class=no-js><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-36037335-10');</script><link rel=alternate hreflang=en href=https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>用户自定义资源的版本 | Kubernetes</title><meta property="og:title" content="用户自定义资源的版本"><meta property="og:description" content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><meta property="og:type" content="article"><meta property="og:url" content="https://kubernetes.io/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/"><meta property="article:modified_time" content="2020-08-16T16:31:39+08:00"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="用户自定义资源的版本"><meta itemprop=description content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><meta itemprop=dateModified content="2020-08-16T16:31:39+08:00"><meta itemprop=wordCount content="1613"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="用户自定义资源的版本"><meta name=twitter:description content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><link rel=preload href=/scss/main.min.29d9d9a40037804116049b9cb05556d3c544759c5ed8a73b36824ddcb7c27564.css as=style><link href=/scss/main.min.29d9d9a40037804116049b9cb05556d3c544759c5ed8a73b36824ddcb7c27564.css rel=stylesheet integrity><script src=/js/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png"}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/base_fonts.css><link rel=stylesheet href=/css/jquery-ui.min.css><link rel=stylesheet href=/css/callouts.css><link rel=stylesheet href=/css/custom-jekyll/tags.css><meta name=description content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><meta property="og:description" content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><meta name=twitter:description content="本页介绍如何添加版本信息到 CustomResourceDefinitions， 如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。 本页还描述如何将对象从一个版本升级到另一个版本。
准备开始 你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。 如果你还没有集群，你可以通过 Minikube 构建一 个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：
 Katacoda Play with Kubernetes  你应该对自定义资源 有一些初步了解。
您的 Kubernetes 服务器版本必须不低于版本 v1.16. 要获知版本信息，请输入 kubectl version. 概览 CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。
创建 CustomResourceDefinition 时，会在 CustomResourceDefinition spec.versions 列表设置适当的稳定级和版本号。例如v1beta1表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本
创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。
稍后可能需要添加新版本，例如 v1。
增加一个新版本：
 选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点， 有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更， 则使用 None 默认转换策略，不同版本时只有apiVersion字段有变更。 如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 Webhook conversion。 更新 CustomResourceDefinition，来将新版本包含在具有served：true的 spec."><meta property="og:url" content="https://kubernetes.io/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/"><meta property="og:title" content="用户自定义资源的版本"><meta name=twitter:title content="用户自定义资源的版本"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-ui-1.12.1.min.js></script><script src=/js/sweetalert-2.1.2.min.js></script><script src=/js/script.js></script><title>用户自定义资源的版本 | Kubernetes</title></head><body class="td-page td-documentation"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh/docs/>文档</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/blog/>Kubernetes 博客</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/training/>培训</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/partners/>合作伙伴</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/community/>社区</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/case-studies/>案例分析</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versions</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://kubernetes.io>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io>v1.21</a>
<a class=dropdown-item href=https://v1-20.docs.kubernetes.io>v1.20</a>
<a class=dropdown-item href=https://v1-19.docs.kubernetes.io>v1.19</a>
<a class=dropdown-item href=https://v1-18.docs.kubernetes.io>v1.18</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 Chinese</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/>English</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav><div class=header-filler></div></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-md-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" name=q placeholder="&#xf002 搜索" aria-label=搜索 autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><ul><li class="collapse show" id=zh-docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/home/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">主页</a></li><ul><li class=collapse id=zh-docs-home><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-home-supported-doc-versions href=/zh/docs/home/supported-doc-versions/>Kubernetes 文档支持的版本</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">入门</a></li><ul><li class=collapse id=zh-docs-setup><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/release/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 发行说明和版本偏差</a></li><ul><li class=collapse id=zh-docs-setup-release><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-notes href=/zh/docs/setup/release/notes/>v1.18 发布说明</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-version-skew-policy href=/zh/docs/setup/release/version-skew-policy/>Kubernetes 版本及版本倾斜支持策略</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/learning-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习环境</a></li><ul><li class=collapse id=zh-docs-setup-learning-environment><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-learning-environment-kind target=_blank href=/docs/setup/learning-environment/kind/>Installing Kubernetes with Kind <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-learning-environment-minikube href=/zh/docs/setup/learning-environment/minikube/>使用 Minikube 安装 Kubernetes</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-independent-create-cluster-kubeadm href=/zh/docs/setup/independent/create-cluster-kubeadm/>使用 kubeadm 创建一个单主集群</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">生产环境</a></li><ul><li class=collapse id=zh-docs-setup-production-environment><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-container-runtimes href=/zh/docs/setup/production-environment/container-runtimes/>容器运行时</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/turnkey/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Turnkey 云解决方案</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-turnkey><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-turnkey-gce target=_blank href=/docs/setup/production-environment/turnkey/gce/>Running Kubernetes on Google Compute Engine <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-icp href=/zh/docs/setup/production-environment/turnkey/icp/>使用 IBM Cloud Private 在多个云上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-aws href=/zh/docs/setup/production-environment/turnkey/aws/>在 AWS EC2 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-azure href=/zh/docs/setup/production-environment/turnkey/azure/>在 Azure 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-clc href=/zh/docs/setup/production-environment/turnkey/clc/>在 CenturyLink Cloud 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-tencent href=/zh/docs/setup/production-environment/turnkey/tencent/>在腾讯云容器服务上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-alibaba-cloud href=/zh/docs/setup/production-environment/turnkey/alibaba-cloud/>在阿里云上运行 Kubernetes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用部署工具安装 Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 kubeadm 引导集群</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-install-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/>安装 kubeadm</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-troubleshooting-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/>对 kubeadm 进行故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-tools-kubeadm-create-cluster-kubeadm target=_blank href=/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/>Creating a cluster with kubeadm <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-control-plane-flags href=/zh/docs/setup/production-environment/tools/kubeadm/control-plane-flags/>使用 kubeadm 定制控制平面配置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-ha-topology href=/zh/docs/setup/production-environment/tools/kubeadm/ha-topology/>高可用拓扑选项</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-high-availability href=/zh/docs/setup/production-environment/tools/kubeadm/high-availability/>利用 kubeadm 创建高可用集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-setup-ha-etcd-with-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/>使用 kubeadm 创建一个高可用 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-kubelet-integration href=/zh/docs/setup/production-environment/tools/kubeadm/kubelet-integration/>使用 kubeadm 配置集群中的每个 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-self-hosting href=/zh/docs/setup/production-environment/tools/kubeadm/self-hosting/>配置您的 kubernetes 集群以自托管控制平台</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kops href=/zh/docs/setup/production-environment/tools/kops/>使用 Kops 安装 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-tools-kubespray target=_blank href=/docs/setup/production-environment/tools/kubespray/>Installing Kubernetes with Kubespray <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/on-premises-vm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">本地 VMs</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-on-premises-vm><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-on-premises-vm-cloudstack target=_blank href=/docs/setup/production-environment/on-premises-vm/cloudstack/>Cloudstack <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-on-premises-vm-dcos href=/zh/docs/setup/production-environment/on-premises-vm/dcos/>DC/OS 上的 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-on-premises-vm-ovirt href=/zh/docs/setup/production-environment/on-premises-vm/ovirt/>oVirt</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/windows/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Windows Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-windows><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-windows-intro-windows-in-kubernetes target=_blank href=/docs/setup/production-environment/windows/intro-windows-in-kubernetes/>Intro to Windows support in Kubernetes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-windows-user-guide-windows-containers href=/zh/docs/setup/production-environment/windows/user-guide-windows-containers/>Kubernetes 中调度 Windows 容器的指南</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/best-practices/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">最佳实践</a></li><ul><li class=collapse id=zh-docs-setup-best-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-best-practices-multiple-zones target=_blank href=/docs/setup/best-practices/multiple-zones/>Running in multiple zones <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-cluster-large href=/zh/docs/setup/best-practices/cluster-large/>创建大型集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-node-conformance href=/zh/docs/setup/best-practices/node-conformance/>校验节点设置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-certificates href=/zh/docs/setup/best-practices/certificates/>PKI 证书和要求</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献新内容</a></li><ul><li class=collapse id=zh-docs-contribute><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-suggest-improvements href=/zh/docs/contribute/suggest-improvements/>提出内容改进建议</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/new-content/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献新内容</a></li><ul><li class=collapse id=zh-docs-contribute-new-content><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-overview href=/zh/docs/contribute/new-content/overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-open-a-pr href=/zh/docs/contribute/new-content/open-a-pr/>发起拉取请求（PR）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-new-features href=/zh/docs/contribute/new-content/new-features/>为发行版本撰写文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-blogs-case-studies href=/zh/docs/contribute/new-content/blogs-case-studies/>博客和案例分析</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/review/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">评阅变更</a></li><ul><li class=collapse id=zh-docs-contribute-review><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-reviewing-prs href=/zh/docs/contribute/review/reviewing-prs/>评阅 PRs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-for-approvers href=/zh/docs/contribute/review/for-approvers/>评阅人和批准人</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-localization href=/zh/docs/contribute/localization/>本地化 Kubernetes 文档</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/participate/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参与 SIG Docs</a></li><ul><li class=collapse id=zh-docs-contribute-participate><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-roles-and-responsibilities href=/zh/docs/contribute/participate/roles-and-responsibilities/>角色与责任</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-pr-wranglers href=/zh/docs/contribute/participate/pr-wranglers/>PR 管理者</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/generate-ref-docs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考文档概述</a></li><ul><li class=collapse id=zh-docs-contribute-generate-ref-docs><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-contribute-upstream href=/zh/docs/contribute/generate-ref-docs/contribute-upstream/>为上游 Kubernetes 代码库做出贡献</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-quickstart href=/zh/docs/contribute/generate-ref-docs/quickstart/>快速入门</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-api href=/zh/docs/contribute/generate-ref-docs/kubernetes-api/>为 Kubernetes API 生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubectl href=/zh/docs/contribute/generate-ref-docs/kubectl/>为 kubectl 命令集生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-components href=/zh/docs/contribute/generate-ref-docs/kubernetes-components/>为 Kubernetes 组件和工具生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-prerequisites-ref-docs href=/zh/docs/contribute/generate-ref-docs/prerequisites-ref-docs/></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/style/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">文档样式概述</a></li><ul><li class=collapse id=zh-docs-contribute-style><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-guide href=/zh/docs/contribute/style/content-guide/>内容指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-style-guide href=/zh/docs/contribute/style/style-guide/>样式指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-write-new-topic href=/zh/docs/contribute/style/write-new-topic/>撰写新主题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-page-content-types href=/zh/docs/contribute/style/page-content-types/>页面内容类型</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-organization href=/zh/docs/contribute/style/content-organization/>内容组织</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-hugo-shortcodes href=/zh/docs/contribute/style/hugo-shortcodes/>定制 Hugo 短代码</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-advanced href=/zh/docs/contribute/advanced/>高级贡献</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概念</a></li><ul><li class=collapse id=zh-docs-concepts><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概述</a></li><ul><li class=collapse id=zh-docs-concepts-overview><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-what-is-kubernetes href=/zh/docs/concepts/overview/what-is-kubernetes/>Kubernetes 是什么？</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-components href=/zh/docs/concepts/overview/components/>Kubernetes 组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-kubernetes-api href=/zh/docs/concepts/overview/kubernetes-api/>Kubernetes API</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/working-with-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-concepts-overview-working-with-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-kubernetes-objects href=/zh/docs/concepts/overview/working-with-objects/kubernetes-objects/>理解 Kubernetes 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-object-management href=/zh/docs/concepts/overview/working-with-objects/object-management/>Kubernetes 对象管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-names href=/zh/docs/concepts/overview/working-with-objects/names/>对象名称和 IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-namespaces href=/zh/docs/concepts/overview/working-with-objects/namespaces/>名字空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-labels href=/zh/docs/concepts/overview/working-with-objects/labels/>标签和选择算符</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-annotations href=/zh/docs/concepts/overview/working-with-objects/annotations/>注解</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-field-selectors href=/zh/docs/concepts/overview/working-with-objects/field-selectors/>字段选择器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-common-labels href=/zh/docs/concepts/overview/working-with-objects/common-labels/>推荐使用的标签</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 架构</a></li><ul><li class=collapse id=zh-docs-concepts-architecture><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-nodes href=/zh/docs/concepts/architecture/nodes/>节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-control-plane-node-communication href=/zh/docs/concepts/architecture/control-plane-node-communication/>控制面到节点通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-cloud-controller href=/zh/docs/concepts/architecture/cloud-controller/>云控制器管理器的基础概念</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-controller href=/zh/docs/concepts/architecture/controller/>控制器</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/containers/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">容器</a></li><ul><li class=collapse id=zh-docs-concepts-containers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-images href=/zh/docs/concepts/containers/images/>镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-environment href=/zh/docs/concepts/containers/container-environment/>容器环境</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-runtime-class href=/zh/docs/concepts/containers/runtime-class/>容器运行时类(Runtime Class)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-lifecycle-hooks href=/zh/docs/concepts/containers/container-lifecycle-hooks/>容器生命周期回调</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">工作负载</a></li><ul><li class=collapse id=zh-docs-concepts-workloads><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/pods/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pods</a></li><ul><li class=collapse id=zh-docs-concepts-workloads-pods><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-lifecycle href=/zh/docs/concepts/workloads/pods/pod-lifecycle/>Pod 的生命周期</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-podpreset href=/zh/docs/concepts/workloads/pods/podpreset/>Pod Preset</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-topology-spread-constraints href=/zh/docs/concepts/workloads/pods/pod-topology-spread-constraints/>Pod 拓扑扩展约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-disruptions href=/zh/docs/concepts/workloads/pods/disruptions/>干扰（Disruptions）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-ephemeral-containers href=/zh/docs/concepts/workloads/pods/ephemeral-containers/>临时容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-init-containers href=/zh/docs/concepts/workloads/pods/init-containers/>Init 容器</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/controllers/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">控制器</a></li><ul><li class=collapse id=zh-docs-concepts-workloads-controllers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicaset href=/zh/docs/concepts/workloads/controllers/replicaset/>ReplicaSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicationcontroller href=/zh/docs/concepts/workloads/controllers/replicationcontroller/>ReplicationController</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-deployment href=/zh/docs/concepts/workloads/controllers/deployment/>Deployments</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-statefulset href=/zh/docs/concepts/workloads/controllers/statefulset/>StatefulSets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-daemonset href=/zh/docs/concepts/workloads/controllers/daemonset/>DaemonSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-job href=/zh/docs/concepts/workloads/controllers/job/>Jobs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-ttlafterfinished href=/zh/docs/concepts/workloads/controllers/ttlafterfinished/>已完成资源的 TTL 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-garbage-collection href=/zh/docs/concepts/workloads/controllers/garbage-collection/>垃圾收集</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-cron-jobs href=/zh/docs/concepts/workloads/controllers/cron-jobs/>CronJob</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/storage/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">存储</a></li><ul><li class=collapse id=zh-docs-concepts-storage><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volumes href=/zh/docs/concepts/storage/volumes/>卷</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-storage-persistent-volumes target=_blank href=/docs/concepts/storage/persistent-volumes/>Persistent Volumes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshots href=/zh/docs/concepts/storage/volume-snapshots/>卷快照</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-pvc-datasource href=/zh/docs/concepts/storage/volume-pvc-datasource/>CSI 卷克隆</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshot-classes href=/zh/docs/concepts/storage/volume-snapshot-classes/>卷快照类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-classes href=/zh/docs/concepts/storage/storage-classes/>存储类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-dynamic-provisioning href=/zh/docs/concepts/storage/dynamic-provisioning/>动态卷供应</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-limits href=/zh/docs/concepts/storage/storage-limits/>特定于节点的卷数限制</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-concepts-configuration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-overview href=/zh/docs/concepts/configuration/overview/>配置最佳实践</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-configmap href=/zh/docs/concepts/configuration/configmap/>ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-pod-overhead href=/zh/docs/concepts/configuration/pod-overhead/>Pod 开销</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-secret href=/zh/docs/concepts/configuration/secret/>Secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-manage-resources-containers href=/zh/docs/concepts/configuration/manage-resources-containers/>为容器管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-resource-bin-packing href=/zh/docs/concepts/configuration/resource-bin-packing/>扩展资源的资源装箱</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-organize-cluster-access-kubeconfig href=/zh/docs/concepts/configuration/organize-cluster-access-kubeconfig/>使用 kubeconfig 文件组织集群访问</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-configuration-pod-priority-preemption target=_blank href=/docs/concepts/configuration/pod-priority-preemption/>Pod Priority and Preemption <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/services-networking/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">服务、负载均衡和联网</a></li><ul><li class=collapse id=zh-docs-concepts-services-networking><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service-topology href=/zh/docs/concepts/services-networking/service-topology/>Service 拓扑</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service href=/zh/docs/concepts/services-networking/service/>服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-endpoint-slices href=/zh/docs/concepts/services-networking/endpoint-slices/>端点切片（Endpoint Slices）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dns-pod-service href=/zh/docs/concepts/services-networking/dns-pod-service/>Pod 与 Service 的 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-connect-applications-service href=/zh/docs/concepts/services-networking/connect-applications-service/>使用 Service 连接到应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress href=/zh/docs/concepts/services-networking/ingress/>Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress-controllers href=/zh/docs/concepts/services-networking/ingress-controllers/>Ingress 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-network-policies href=/zh/docs/concepts/services-networking/network-policies/>网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-add-entries-to-pod-etc-hosts-with-host-aliases href=/zh/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/>使用 HostAliases 向 Pod /etc/hosts 文件添加条目</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dual-stack href=/zh/docs/concepts/services-networking/dual-stack/>IPv4/IPv6 双协议栈</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安全</a></li><ul><li class=collapse id=zh-docs-concepts-security><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-security-overview target=_blank href=/docs/concepts/security/overview/>Overview of Cloud Native Security <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-security-pod-security-standards target=_blank href=/docs/concepts/security/pod-security-standards/>Pod Security Standards <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/scheduling-eviction/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">调度和驱逐(Scheduling and Eviction)</a></li><ul><li class=collapse id=zh-docs-concepts-scheduling-eviction><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-taint-and-toleration href=/zh/docs/concepts/scheduling-eviction/taint-and-toleration/>污点和容忍度</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-kube-scheduler href=/zh/docs/concepts/scheduling-eviction/kube-scheduler/>Kubernetes 调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-assign-pod-node href=/zh/docs/concepts/scheduling-eviction/assign-pod-node/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduling-framework href=/zh/docs/concepts/scheduling-eviction/scheduling-framework/>调度框架</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduler-perf-tuning href=/zh/docs/concepts/scheduling-eviction/scheduler-perf-tuning/>调度器性能调优</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/cluster-administration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群管理</a></li><ul><li class=collapse id=zh-docs-concepts-cluster-administration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-certificates href=/zh/docs/concepts/cluster-administration/certificates/>证书</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-cloud-providers href=/zh/docs/concepts/cluster-administration/cloud-providers/>云驱动</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-manage-deployment href=/zh/docs/concepts/cluster-administration/manage-deployment/>管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-networking href=/zh/docs/concepts/cluster-administration/networking/>集群网络系统</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-monitoring href=/zh/docs/concepts/cluster-administration/monitoring/>Kubernetes 控制面的指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-logging href=/zh/docs/concepts/cluster-administration/logging/>日志架构</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-kubelet-garbage-collection href=/zh/docs/concepts/cluster-administration/kubelet-garbage-collection/>配置 kubelet 垃圾回收策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-proxies href=/zh/docs/concepts/cluster-administration/proxies/>Kubernetes 中的代理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-controller-metrics href=/zh/docs/concepts/cluster-administration/controller-metrics/>控制器管理器指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-cluster-administration-flow-control target=_blank href=/docs/concepts/cluster-administration/flow-control/>API Priority and Fairness <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-addons href=/zh/docs/concepts/cluster-administration/addons/>安装扩展（Addons）</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-extend-cluster href=/zh/docs/concepts/extend-kubernetes/extend-cluster/>扩展 Kubernetes 集群</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/api-extension/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes API</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-api-extension><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-extend-kubernetes-api-extension-custom-resources target=_blank href=/docs/concepts/extend-kubernetes/api-extension/custom-resources/>Custom Resources <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-api-extension-apiserver-aggregation href=/zh/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/>通过聚合层扩展 Kubernetes API</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-operator href=/zh/docs/concepts/extend-kubernetes/operator/>Operator 模式</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">计算、存储和网络扩展</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-compute-storage-net><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-network-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/>网络插件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-device-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/>设备插件</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-service-catalog href=/zh/docs/concepts/extend-kubernetes/service-catalog/>服务目录</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/policy/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">策略</a></li><ul><li class=collapse id=zh-docs-concepts-policy><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-resource-quotas href=/zh/docs/concepts/policy/resource-quotas/>资源配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-limit-range href=/zh/docs/concepts/policy/limit-range/>限制范围</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-pod-security-policy href=/zh/docs/concepts/policy/pod-security-policy/>Pod 安全策略</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">任务</a></li><ul><li class="collapse show" id=zh-docs-tasks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-tasks-tools><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-kubectl href=/zh/docs/tasks/tools/install-kubectl/>安装并配置 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-minikube href=/zh/docs/tasks/tools/install-minikube/>安装 Minikube</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">用 kubeadm 进行管理</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-upgrade href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/>升级 kubeadm 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-kubeadm-adding-windows-nodes target=_blank href=/docs/tasks/administer-cluster/kubeadm/adding-windows-nodes/>Adding Windows nodes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-kubeadm-upgrading-windows-nodes target=_blank href=/docs/tasks/administer-cluster/kubeadm/upgrading-windows-nodes/>Upgrading Windows nodes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-certs href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/>使用 kubeadm 进行证书管理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/manage-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理内存，CPU 和 API 资源</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-manage-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/>为命名空间配置默认的内存请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-default-namespace/>为命名空间配置默认的 CPU 请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-constraint-namespace/>配置命名空间的最小和最大内存约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/>为命名空间配置 CPU 最小和最大约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-memory-cpu-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/>为命名空间配置内存和 CPU 配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-pod-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-pod-namespace/>配置命名空间下 Pod 配额</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/network-policy-provider/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装网络规则驱动</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-network-policy-provider><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-calico-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/calico-network-policy/>使用 Calico 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-cilium-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/cilium-network-policy/>使用 Cilium 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-kube-router-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/kube-router-network-policy/>使用 kube-router 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-romana-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/romana-network-policy/>使用 Romana 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-weave-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/weave-network-policy/>使用 Weave Net 提供 NetworkPolicy</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-enabling-service-topology target=_blank href=/docs/tasks/administer-cluster/enabling-service-topology/>Enabling Service Topology <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-ip-masq-agent href=/zh/docs/tasks/administer-cluster/ip-masq-agent/>IP Masquerade Agent 用户指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-running-cloud-controller href=/zh/docs/tasks/administer-cluster/running-cloud-controller/>Kubernetes 云管理控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-safely-drain-node target=_blank href=/docs/tasks/administer-cluster/safely-drain-node/>Safely Drain a Node while Respecting the PodDisruptionBudget <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-configure-upgrade-etcd href=/zh/docs/tasks/administer-cluster/configure-upgrade-etcd/>为 Kubernetes 运行 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reserve-compute-resources href=/zh/docs/tasks/administer-cluster/reserve-compute-resources/>为系统守护进程预留计算资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-extended-resource-node href=/zh/docs/tasks/administer-cluster/extended-resource-node/>为节点发布扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-coredns href=/zh/docs/tasks/administer-cluster/coredns/>使用 CoreDNS 进行服务发现</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kms-provider href=/zh/docs/tasks/administer-cluster/kms-provider/>使用 KMS 提供商进行数据加密</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-api href=/zh/docs/tasks/administer-cluster/access-cluster-api/>使用 Kubernetes API 访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-securing-a-cluster href=/zh/docs/tasks/administer-cluster/securing-a-cluster/>保护集群安全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-guaranteed-scheduling-critical-addon-pods href=/zh/docs/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/>关键插件 Pod 的调度保证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces-walkthrough href=/zh/docs/tasks/administer-cluster/namespaces-walkthrough/>名字空间演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-enabling-endpointslices href=/zh/docs/tasks/administer-cluster/enabling-endpointslices/>启用端点切片</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-nodelocaldns href=/zh/docs/tasks/administer-cluster/nodelocaldns/>在 Kubernetes 集群中使用 NodeLocal DNSCache</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-sysctl-cluster href=/zh/docs/tasks/administer-cluster/sysctl-cluster/>在 Kubernetes 集群中使用 sysctl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reconfigure-kubelet href=/zh/docs/tasks/administer-cluster/reconfigure-kubelet/>在运行中的集群上重新配置节点的 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-declare-network-policy href=/zh/docs/tasks/administer-cluster/declare-network-policy/>声明网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-developing-cloud-controller-manager href=/zh/docs/tasks/administer-cluster/developing-cloud-controller-manager/>开发云控制器管理器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cpu-management-policies href=/zh/docs/tasks/administer-cluster/cpu-management-policies/>控制节点上的 CPU 管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-topology-manager href=/zh/docs/tasks/administer-cluster/topology-manager/>控制节点上的拓扑管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-highly-available-master href=/zh/docs/tasks/administer-cluster/highly-available-master/>搭建高可用的 Kubernetes Masters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-default-storage-class href=/zh/docs/tasks/administer-cluster/change-default-storage-class/>改变默认 StorageClass</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-pv-reclaim-policy href=/zh/docs/tasks/administer-cluster/change-pv-reclaim-policy/>更改 PersistentVolume 的回收策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-horizontal-autoscaling href=/zh/docs/tasks/administer-cluster/dns-horizontal-autoscaling/>自动扩缩集群 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-custom-nameservers href=/zh/docs/tasks/administer-cluster/dns-custom-nameservers/>自定义 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-services href=/zh/docs/tasks/administer-cluster/access-cluster-services/>访问集群上运行的服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-debugging-resolution href=/zh/docs/tasks/administer-cluster/dns-debugging-resolution/>调试 DNS 问题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces href=/zh/docs/tasks/administer-cluster/namespaces/>通过命名空间共享集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubelet-config-file href=/zh/docs/tasks/administer-cluster/kubelet-config-file/>通过配置文件设置 Kubelet 参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-quota-api-object href=/zh/docs/tasks/administer-cluster/quota-api-object/>配置 API 对象配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-out-of-resource href=/zh/docs/tasks/administer-cluster/out-of-resource/>配置资源不足时的处理方式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-limit-storage-consumption href=/zh/docs/tasks/administer-cluster/limit-storage-consumption/>限制存储消耗</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cluster-management href=/zh/docs/tasks/administer-cluster/cluster-management/>集群管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-encrypt-data href=/zh/docs/tasks/administer-cluster/encrypt-data/>静态加密 Secret 数据</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/configure-pod-container/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置 Pods 和容器</a></li><ul><li class=collapse id=zh-docs-tasks-configure-pod-container><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-memory-resource href=/zh/docs/tasks/configure-pod-container/assign-memory-resource/>为容器和 Pod 分配内存资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-configure-gmsa target=_blank href=/docs/tasks/configure-pod-container/configure-gmsa/>Configure GMSA for Windows Pods and containers <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-runasusername href=/zh/docs/tasks/configure-pod-container/configure-runasusername/>为 Windows 的 Pod 和容器配置 RunAsUserName</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-cpu-resource href=/zh/docs/tasks/configure-pod-container/assign-cpu-resource/>为容器和 Pods 分配 CPU 资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-quality-service-pod href=/zh/docs/tasks/configure-pod-container/quality-service-pod/>配置 Pod 的服务质量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-extended-resource href=/zh/docs/tasks/configure-pod-container/extended-resource/>为容器分派扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-volume-storage/>配置 Pod 以使用卷进行存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-persistent-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/>配置 Pod 以使用 PersistentVolume 作为存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-projected-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-projected-volume-storage/>配置 Pod 使用投射卷作存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-security-context target=_blank href=/docs/tasks/configure-pod-container/security-context/>Configure a Security Context for a Pod or Container <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-service-account href=/zh/docs/tasks/configure-pod-container/configure-service-account/>为 Pod 配置服务账户</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-pull-image-private-registry href=/zh/docs/tasks/configure-pod-container/pull-image-private-registry/>从私有仓库拉取镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-liveness-readiness-startup-probes href=/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/>配置存活、就绪和启动探测器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-assign-pods-nodes-using-node-affinity target=_blank href=/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/>Assign Pods to Nodes using Node Affinity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-pods-nodes href=/zh/docs/tasks/configure-pod-container/assign-pods-nodes/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-initialization href=/zh/docs/tasks/configure-pod-container/configure-pod-initialization/>配置 Pod 初始化</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-attach-handler-lifecycle-event href=/zh/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/>为容器的生命周期事件设置处理函数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-configmap href=/zh/docs/tasks/configure-pod-container/configure-pod-configmap/>配置 Pod 使用 ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-share-process-namespace href=/zh/docs/tasks/configure-pod-container/share-process-namespace/>在 Pod 中的容器之间共享进程命名空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-static-pod href=/zh/docs/tasks/configure-pod-container/static-pod/>创建静态 Pod</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-translate-compose-kubernetes href=/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/>将 Docker Compose 文件转换为 Kubernetes 资源</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-kubernetes-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-tasks-manage-kubernetes-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-declarative-config target=_blank href=/docs/tasks/manage-kubernetes-objects/declarative-config/>Declarative Management of Kubernetes Objects Using Configuration Files <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-kustomization target=_blank href=/docs/tasks/manage-kubernetes-objects/kustomization/>Declarative Management of Kubernetes Objects Using Kustomize <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-imperative-command target=_blank href=/docs/tasks/manage-kubernetes-objects/imperative-command/>Managing Kubernetes Objects Using Imperative Commands <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-imperative-config href=/zh/docs/tasks/manage-kubernetes-objects/imperative-config/>使用配置文件对 Kubernetes 对象进行命令式管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-update-api-object-kubectl-patch target=_blank href=/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch/>Update API Objects in Place Using kubectl patch <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/inject-data-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">给应用注入数据</a></li><ul><li class=collapse id=zh-docs-tasks-inject-data-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-command-argument-container href=/zh/docs/tasks/inject-data-application/define-command-argument-container/>为容器设置启动时要执行的命令和参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-inject-data-application-define-interdependent-environment-variables target=_blank href=/docs/tasks/inject-data-application/define-interdependent-environment-variables/>Define Dependent Environment Variables <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-environment-variable-container href=/zh/docs/tasks/inject-data-application/define-environment-variable-container/>为容器设置环境变量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-environment-variable-expose-pod-information href=/zh/docs/tasks/inject-data-application/environment-variable-expose-pod-information/>通过环境变量将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-downward-api-volume-expose-pod-information href=/zh/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/>通过文件将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-distribute-credentials-secure href=/zh/docs/tasks/inject-data-application/distribute-credentials-secure/>使用 Secret 安全地分发凭证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-podpreset href=/zh/docs/tasks/inject-data-application/podpreset/>使用 PodPreset 将信息注入 Pod</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/run-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行应用</a></li><ul><li class=collapse id=zh-docs-tasks-run-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-replicated-stateful-application href=/zh/docs/tasks/run-application/run-replicated-stateful-application/>运行一个有状态的应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-update-api-object-kubectl-patch href=/zh/docs/tasks/run-application/update-api-object-kubectl-patch/>使用 kubectl patch 更新 API 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-delete-stateful-set href=/zh/docs/tasks/run-application/delete-stateful-set/>删除 StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-force-delete-stateful-set-pod href=/zh/docs/tasks/run-application/force-delete-stateful-set-pod/>强制删除 StatefulSet 类型的 Pods</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale href=/zh/docs/tasks/run-application/horizontal-pod-autoscale/>Pod 水平自动扩缩</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale-walkthrough href=/zh/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/>Horizontal Pod Autoscaler 演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-configure-pdb href=/zh/docs/tasks/run-application/configure-pdb/>为应用程序设置干扰预算（Disruption Budget）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-stateless-application-deployment href=/zh/docs/tasks/run-application/run-stateless-application-deployment/>使用Deployment运行一个无状态应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-scale-stateful-set href=/zh/docs/tasks/run-application/scale-stateful-set/>扩缩 StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-single-instance-stateful-application href=/zh/docs/tasks/run-application/run-single-instance-stateful-application/>运行一个单实例有状态应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/job/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行 Jobs</a></li><ul><li class=collapse id=zh-docs-tasks-job><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-automated-tasks-with-cron-jobs href=/zh/docs/tasks/job/automated-tasks-with-cron-jobs/>使用 CronJob 运行自动化任务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-parallel-processing-expansion href=/zh/docs/tasks/job/parallel-processing-expansion/>使用扩展进行并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-coarse-parallel-processing-work-queue href=/zh/docs/tasks/job/coarse-parallel-processing-work-queue/>使用工作队列进行粗粒度并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-fine-parallel-processing-work-queue href=/zh/docs/tasks/job/fine-parallel-processing-work-queue/>使用工作队列进行精细的并行处理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/access-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">访问集群中的应用程序</a></li><ul><li class=collapse id=zh-docs-tasks-access-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-web-ui-dashboard href=/zh/docs/tasks/access-application-cluster/web-ui-dashboard/>Web 界面 (Dashboard)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-access-cluster href=/zh/docs/tasks/access-application-cluster/access-cluster/>访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-port-forward-access-application-cluster href=/zh/docs/tasks/access-application-cluster/port-forward-access-application-cluster/>使用端口转发来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-service-access-application-cluster href=/zh/docs/tasks/access-application-cluster/service-access-application-cluster/>使用服务来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-connecting-frontend-backend href=/zh/docs/tasks/access-application-cluster/connecting-frontend-backend/>使用 Service 把前端连接到后端</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-create-external-load-balancer href=/zh/docs/tasks/access-application-cluster/create-external-load-balancer/>创建外部负载均衡器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-cloud-provider-firewall href=/zh/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/>配置你的云平台防火墙</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-list-all-running-container-images href=/zh/docs/tasks/access-application-cluster/list-all-running-container-images/>列出集群中所有运行容器的镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-ingress-minikube href=/zh/docs/tasks/access-application-cluster/ingress-minikube/>在 Minikube 环境中使用 NGINX Ingress 控制器配置 Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-dns-cluster href=/zh/docs/tasks/access-application-cluster/configure-dns-cluster/>为集群配置 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-communicate-containers-same-pod-shared-volume href=/zh/docs/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/>同 Pod 内的容器使用共享卷通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-access-multiple-clusters href=/zh/docs/tasks/access-application-cluster/configure-access-multiple-clusters/>配置对多集群的访问</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/debug-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">监控、日志和排错</a></li><ul><li class=collapse id=zh-docs-tasks-debug-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-debug-application-cluster-debug-running-pod target=_blank href=/docs/tasks/debug-application-cluster/debug-running-pod/>Debug Running Pods <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-debug-application-cluster-logging-stackdriver target=_blank href=/docs/tasks/debug-application-cluster/logging-stackdriver/>Logging Using Stackdriver <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-events-stackdriver href=/zh/docs/tasks/debug-application-cluster/events-stackdriver/>StackDriver 中的事件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-crictl href=/zh/docs/tasks/debug-application-cluster/crictl/>使用 crictl 对 Kubernetes 节点进行调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-logging-elasticsearch-kibana href=/zh/docs/tasks/debug-application-cluster/logging-elasticsearch-kibana/>使用 ElasticSearch 和 Kibana 进行日志管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-local-debugging href=/zh/docs/tasks/debug-application-cluster/local-debugging/>在本地开发和调试服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-audit href=/zh/docs/tasks/debug-application-cluster/audit/>审计</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application href=/zh/docs/tasks/debug-application-cluster/debug-application/>应用故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application-introspection href=/zh/docs/tasks/debug-application-cluster/debug-application-introspection/>应用自测与调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-troubleshooting href=/zh/docs/tasks/debug-application-cluster/troubleshooting/>排错</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-determine-reason-pod-failure href=/zh/docs/tasks/debug-application-cluster/determine-reason-pod-failure/>确定 Pod 失败的原因</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-monitor-node-health href=/zh/docs/tasks/debug-application-cluster/monitor-node-health/>节点健康监测</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-get-shell-running-container href=/zh/docs/tasks/debug-application-cluster/get-shell-running-container/>获取正在运行容器的 Shell</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-init-containers href=/zh/docs/tasks/debug-application-cluster/debug-init-containers/>调试 Init 容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-pod-replication-controller href=/zh/docs/tasks/debug-application-cluster/debug-pod-replication-controller/>调试 Pods 和 ReplicationControllers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-service href=/zh/docs/tasks/debug-application-cluster/debug-service/>调试 Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-stateful-set href=/zh/docs/tasks/debug-application-cluster/debug-stateful-set/>调试StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-metrics-pipeline href=/zh/docs/tasks/debug-application-cluster/resource-metrics-pipeline/>资源指标管道</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-usage-monitoring href=/zh/docs/tasks/debug-application-cluster/resource-usage-monitoring/>资源监控工具</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-cluster href=/zh/docs/tasks/debug-application-cluster/debug-cluster/>集群故障排查</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class="collapse show" id=zh-docs-tasks-extend-kubernetes><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/custom-resources/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">使用自定义资源</a></li><ul><li class="collapse show" id=zh-docs-tasks-extend-kubernetes-custom-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definitions target=_blank href=/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/>Extend the Kubernetes API with CustomResourceDefinitions <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-zh-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definition-versioning href=/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/>用户自定义资源的版本</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-aggregation-layer href=/zh/docs/tasks/extend-kubernetes/configure-aggregation-layer/>配置聚合层</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-setup-extension-api-server href=/zh/docs/tasks/extend-kubernetes/setup-extension-api-server/>安装一个扩展的 API server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-multiple-schedulers href=/zh/docs/tasks/extend-kubernetes/configure-multiple-schedulers/>配置多个调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-http-proxy-access-api href=/zh/docs/tasks/extend-kubernetes/http-proxy-access-api/>使用 HTTP 代理访问 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-extend-kubernetes-setup-konnectivity target=_blank href=/docs/tasks/extend-kubernetes/setup-konnectivity/>Set up Konnectivity service <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">TLS</a></li><ul><li class=collapse id=zh-docs-tasks-tls><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tls-manual-rotation-of-ca-certificates target=_blank href=/docs/tasks/tls/manual-rotation-of-ca-certificates/>Manual Rotation of CA Certificates <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-certificate-rotation href=/zh/docs/tasks/tls/certificate-rotation/>为 kubelet 配置证书轮换</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-managing-tls-in-a-cluster href=/zh/docs/tasks/tls/managing-tls-in-a-cluster/>管理集群中的 TLS 认证</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-daemon/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群守护进程</a></li><ul><li class=collapse id=zh-docs-tasks-manage-daemon><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-update-daemon-set href=/zh/docs/tasks/manage-daemon/update-daemon-set/>对 DaemonSet 执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-rollback-daemon-set href=/zh/docs/tasks/manage-daemon/rollback-daemon-set/>对 DaemonSet 执行回滚</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/service-catalog/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装服务目录</a></li><ul><li class=collapse id=zh-docs-tasks-service-catalog><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-helm href=/zh/docs/tasks/service-catalog/install-service-catalog-using-helm/>使用 Helm 安装 Service Catalog</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-sc href=/zh/docs/tasks/service-catalog/install-service-catalog-using-sc/>使用 SC 安装服务目录</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/network/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">网络</a></li><ul><li class=collapse id=zh-docs-tasks-network><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-network-validate-dual-stack href=/zh/docs/tasks/network/validate-dual-stack/>验证 IPv4/IPv6 双协议栈</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubectl-kubectl-plugins href=/zh/docs/tasks/extend-kubectl/kubectl-plugins/>用插件扩展 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-hugepages-scheduling-hugepages href=/zh/docs/tasks/manage-hugepages/scheduling-hugepages/>管理巨页（HugePages）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-gpus-scheduling-gpus href=/zh/docs/tasks/manage-gpus/scheduling-gpus/>调度 GPUs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">教程</a></li><ul><li class=collapse id=zh-docs-tutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-hello-minikube href=/zh/docs/tutorials/hello-minikube/>你好 Minikube</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习 Kubernetes 基础知识</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/create-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">创建集群</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-create-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-intro href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/>使用 Minikube 创建集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-interactive href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-interactive/>交互式教程 - 创建集群</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/deploy-app/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">部署应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-deploy-app><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-intro href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/>使用 kubectl 创建 Deployment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-interactive href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/>交互式教程 - 部署应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/explore/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">了解你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-explore><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-intro href=/zh/docs/tutorials/kubernetes-basics/explore/explore-intro/>查看 pod 和工作节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-interactive href=/zh/docs/tutorials/kubernetes-basics/explore/explore-interactive/>交互式教程-了解你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/expose/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">公开地暴露你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-expose><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-intro href=/zh/docs/tutorials/kubernetes-basics/expose/expose-intro/>使用 Service 暴露您的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-interactive href=/zh/docs/tutorials/kubernetes-basics/expose/expose-interactive/>交互式教程 - 暴露你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/scale/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">缩放你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-scale><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-intro href=/zh/docs/tutorials/kubernetes-basics/scale/scale-intro/>运行应用程序的多个实例</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-interactive href=/zh/docs/tutorials/kubernetes-basics/scale/scale-interactive/>交互教程 - 缩放你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/update/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">更新你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-update><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-intro href=/zh/docs/tutorials/kubernetes-basics/update/update-intro/>执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-interactive href=/zh/docs/tutorials/kubernetes-basics/update/update-interactive/>交互式教程 - 更新你的应用</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/online-training/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">在线培训课程</a></li><ul><li class=collapse id=zh-docs-tutorials-online-training><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-online-training-overview href=/zh/docs/tutorials/online-training/overview/>Kubernetes 在线培训概述</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-tutorials-configuration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-configuration-configure-redis-using-configmap href=/zh/docs/tutorials/configuration/configure-redis-using-configmap/>使用 ConfigMap 来配置 Redis</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateless-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">无状态应用程序</a></li><ul><li class=collapse id=zh-docs-tutorials-stateless-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-expose-external-ip-address href=/zh/docs/tutorials/stateless-application/expose-external-ip-address/>公开外部 IP 地址以访问集群中应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-guestbook href=/zh/docs/tutorials/stateless-application/guestbook/>示例：使用 Redis 部署 PHP 留言板应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tutorials-stateless-application-guestbook-logs-metrics-with-elk target=_blank href=/docs/tutorials/stateless-application/guestbook-logs-metrics-with-elk/>Example: Add logging and metrics to the PHP / Redis Guestbook example <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateful-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">有状态的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-stateful-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-mysql-wordpress-persistent-volume href=/zh/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/>示例：使用 Persistent Volumes 部署 WordPress 和 MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-basic-stateful-set href=/zh/docs/tutorials/stateful-application/basic-stateful-set/>StatefulSet 基础</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-cassandra href=/zh/docs/tutorials/stateful-application/cassandra/>示例：使用 Stateful Sets 部署 Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-zookeeper href=/zh/docs/tutorials/stateful-application/zookeeper/>运行 ZooKeeper， 一个 CP 分布式系统</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/clusters/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群</a></li><ul><li class=collapse id=zh-docs-tutorials-clusters><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-clusters-apparmor href=/zh/docs/tutorials/clusters/apparmor/>AppArmor</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/services/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Services</a></li><ul><li class=collapse id=zh-docs-tutorials-services><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-services-source-ip href=/zh/docs/tutorials/services/source-ip/>使用 Source IP</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考</a></li><ul><li class=collapse id=zh-docs-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-glossary href=/zh/docs/reference/glossary/>标准化词汇表</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/issues-security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 问题和安全</a></li><ul><li class=collapse id=zh-docs-reference-issues-security><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-issues href=/zh/docs/reference/issues-security/issues/>Kubernetes 问题追踪</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-security href=/zh/docs/reference/issues-security/security/>Kubernetes 安全和信息披露</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/using-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 Kubernetes API</a></li><ul><li class=collapse id=zh-docs-reference-using-api><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-api-overview href=/zh/docs/reference/using-api/api-overview/>Kubernetes API 总览</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-api-concepts target=_blank href=/docs/reference/using-api/api-concepts/>Kubernetes API Concepts <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-client-libraries href=/zh/docs/reference/using-api/client-libraries/>客户端库</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-deprecation-policy target=_blank href=/docs/reference/using-api/deprecation-policy/>Kubernetes Deprecation Policy <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-health-checks target=_blank href=/docs/reference/using-api/health-checks/>Kubernetes API health endpoints <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/access-authn-authz/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">访问 API</a></li><ul><li class=collapse id=zh-docs-reference-access-authn-authz><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-access-authn-authz-authentication target=_blank href=/docs/reference/access-authn-authz/authentication/>Authenticating <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-access-authn-authz-certificate-signing-requests target=_blank href=/docs/reference/access-authn-authz/certificate-signing-requests/>Certificate Signing Requests <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-admission-controllers href=/zh/docs/reference/access-authn-authz/admission-controllers/>使用准入控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-extensible-admission-controllers href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>动态准入控制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-authorization href=/zh/docs/reference/access-authn-authz/authorization/>授权概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-rbac href=/zh/docs/reference/access-authn-authz/rbac/>使用 RBAC 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-node href=/zh/docs/reference/access-authn-authz/node/>使用 Node 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-webhook href=/zh/docs/reference/access-authn-authz/webhook/>Webhook 模式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-controlling-access href=/zh/docs/reference/access-authn-authz/controlling-access/>Kubernetes API 访问控制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-abac href=/zh/docs/reference/access-authn-authz/abac/>使用 ABAC 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-bootstrap-tokens href=/zh/docs/reference/access-authn-authz/bootstrap-tokens/>使用启动引导令牌（Bootstrap Tokens）认证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-service-accounts-admin href=/zh/docs/reference/access-authn-authz/service-accounts-admin/>管理 Service Accounts</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubernetes-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API 参考</a></li><ul><li class=collapse id=zh-docs-reference-kubernetes-api><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubernetes-api-api-index href=/zh/docs/reference/kubernetes-api/api-index/>v1.17</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubernetes-api-labels-annotations-taints href=/zh/docs/reference/kubernetes-api/labels-annotations-taints/>知名标签（Label）、注解（Annotation）和 Taints</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools-kubeadm><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/setup-tools/kubeadm/generated/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm Generated</a></li><ul><li class=collapse id=docs-reference-setup-tools-kubeadm-generated><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-certificate-key target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_certificate-key/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-check-expiration target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_check-expiration/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-admin-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_admin.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-controller-manager-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_controller-manager.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-healthcheck-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-peer target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-peer/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-server target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-server/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-front-proxy-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_front-proxy-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-scheduler-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_scheduler.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig-user target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig_user/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config-enable-dynamic target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_enable-dynamic/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting-pivot target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting_pivot/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-completion target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_completion/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-list target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_list/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-pull target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_pull/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-migrate target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_migrate/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-init-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_init-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-join-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_join-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-view target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_view/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-coredns target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_coredns/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-kube-proxy target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_kube-proxy/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-bootstrap-token target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_bootstrap-token/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-healthcheck-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-peer target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-peer/><small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm href=/zh/docs/reference/setup-tools/kubeadm/kubeadm/>kubeadm 概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init/>kubeadm init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join/>kubeadm join</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/>kubeadm upgrade</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-config href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-config/>kubeadm config</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset/>kubeadm reset</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-token href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-token/>kubeadm 令牌</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-version href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-version/>kubeadm version</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-alpha href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-alpha/>kubeadm alpha</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init-phase/>kubeadm init phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join-phase/>kubeadm join phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset-phase/>kubeadm reset phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade-phase/>kubeadm upgrade phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-implementation-details target=_blank href=/docs/reference/setup-tools/kubeadm/implementation-details/>Implementation details <small>(EN)</small></a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubectl/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">kubectl 命令行界面</a></li><ul><li class=collapse id=zh-docs-reference-kubectl><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-overview href=/zh/docs/reference/kubectl/overview/>kubectl 概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-jsonpath href=/zh/docs/reference/kubectl/jsonpath/>JSONPath 支持</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl href=/zh/docs/reference/kubectl/kubectl/>kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl-cmds href=/zh/docs/reference/kubectl/kubectl-cmds/>kubectl 命令</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-cheatsheet href=/zh/docs/reference/kubectl/cheatsheet/>kubectl 备忘单</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-conventions href=/zh/docs/reference/kubectl/conventions/>kubectl 的用法约定</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-docker-cli-to-kubectl href=/zh/docs/reference/kubectl/docker-cli-to-kubectl/>适用于 Docker 用户的 kubectl</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/command-line-tools-reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">命令行工具参考</a></li><ul><li class=collapse id=zh-docs-reference-command-line-tools-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-feature-gates href=/zh/docs/reference/command-line-tools-reference/feature-gates/>特性门控</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-scheduler href=/zh/docs/reference/command-line-tools-reference/kube-scheduler/>kube-scheduler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet href=/zh/docs/reference/command-line-tools-reference/kubelet/>kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-command-line-tools-reference-cloud-controller-manager target=_blank href=/docs/reference/command-line-tools-reference/cloud-controller-manager/>cloud-controller-manager <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-controller-manager href=/zh/docs/reference/command-line-tools-reference/kube-controller-manager/>kube-controller-manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-proxy href=/zh/docs/reference/command-line-tools-reference/kube-proxy/>kube-proxy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-apiserver href=/zh/docs/reference/command-line-tools-reference/kube-apiserver/>kube-apiserver</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-authentication-authorization href=/zh/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/>Kubelet authentication/authorization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-tls-bootstrapping href=/zh/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/>TLS bootstrapping</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/scheduling/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Scheduling</a></li><ul><li class=collapse id=docs-reference-scheduling><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-scheduling-policies target=_blank href=/docs/reference/scheduling/policies/>Scheduling Policies <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-scheduling-profiles target=_blank href=/docs/reference/scheduling/profiles/>Scheduling Profiles <small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-tools href=/zh/docs/reference/tools/>工具</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-sitemap href=/zh/docs/sitemap/></a><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-test target=_blank href=/docs/test/>Docs smoke test page <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-search href=/zh/docs/search/>搜索结果</a></li></ul></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/>文档</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/tasks/>任务</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/tasks/extend-kubernetes/>扩展 Kubernetes</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/tasks/extend-kubernetes/custom-resources/>使用自定义资源</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://kubernetes.io/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/>用户自定义资源的版本</a></li></ol></nav><section id=deprecation-warning><div class="content deprecation-warning"><h3>您正在查看 Kubernetes 版本的文档： v1.18</h3><p>Kubernetes v1.18 版本的文档已不再维护。您现在看到的版本来自于一份静态的快照。如需查阅最新文档，请点击
<a href=https://kubernetes.io/docs/home/>最新版本。</a></p></div></section><div class=td-content><p><a href=https://github.com/kubernetes/website/edit/master/content/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning.md id=editPageButton target=_blank data-proofer-ignore>Edit This Page</a></p><h1>用户自定义资源的版本</h1><p>本页介绍如何添加版本信息到
<a href=/docs/reference/generated/kubernetes-api/v1.18/#customresourcedefinition-v1beta1-apiextensions>CustomResourceDefinitions</a>，
如何表示 CustomResourceDefinitions 的稳定水平或者用 API 之间的表征的转换提高您的 API 到一个新的版本。
本页还描述如何将对象从一个版本升级到另一个版本。</p><h2 id=准备开始>准备开始</h2><p>你必须拥有一个 Kubernetes 的集群，同时你的 Kubernetes 集群必须带有 kubectl 命令行工具。
如果你还没有集群，你可以通过 <a href=/zh/docs/setup/learning-environment/minikube/>Minikube</a> 构建一
个你自己的集群，或者你可以使用下面任意一个 Kubernetes 工具构建：</p><ul><li><a href=https://www.katacoda.com/courses/kubernetes/playground>Katacoda</a></li><li><a href=http://labs.play-with-k8s.com/>Play with Kubernetes</a></li></ul><p>你应该对<a href=/zh/docs/concepts/extend-kubernetes/api-extension/custom-resources/>自定义资源</a>
有一些初步了解。</p>您的 Kubernetes 服务器版本必须不低于版本 v1.16.
要获知版本信息，请输入 <code>kubectl version</code>.<h2 id=概览>概览</h2><p>CustomResourceDefinition API 提供了用于引入和升级的工作流程到 CustomResourceDefinition 的新版本。</p><p>创建 CustomResourceDefinition 时，会在 CustomResourceDefinition <code>spec.versions</code> 列表设置适当的稳定级和版本号。例如<code>v1beta1</code>表示第一个版本尚未稳定。所有自定义资源对象将首先存储在这个版本</p><p>创建 CustomResourceDefinition 后，客户端可以开始使用 v1beta1 API。</p><p>稍后可能需要添加新版本，例如 v1。</p><p>增加一个新版本：</p><ol><li>选择一种转化策略。由于自定义资源对象需要能够两种版本都可用，这意味着它们有时会以与存储版本不同的版本。为了能够做到这一点，
有时必须在它们存储的版本和提供的版本。如果转换涉及结构变更，并且需要自定义逻辑，转换应该使用 webhook。如果没有结构变更，
则使用 None 默认转换策略，不同版本时只有<code>apiVersion</code>字段有变更。</li><li>如果使用转换 Webhook，请创建并部署转换 Webhook。希望看到更多详细信息，请参见 <a href=#webhook%E8%BD%AC%E6%8D%A2>Webhook conversion</a>。</li><li>更新 CustomResourceDefinition，来将新版本包含在具有<code>served：true</code>的 spec.versions 列表。另外，设置<code>spec.conversion</code>字段
到所选的转换策略。如果使用转换 Webhook，请配置<code>spec.conversion.webhookClientConfig</code>来调用 webhook。</li></ol><p>添加新版本后，客户端可以逐步迁移到新版本。对于某些客户而言，在使用旧版本的同时支持其他人使用新版本。</p><p>将存储的对象迁移到新版本：</p><ol><li>请参阅 <a href=#%E5%B0%86%E7%8E%B0%E6%9C%89%E5%AF%B9%E8%B1%A1%E5%8D%87%E7%BA%A7%E5%88%B0%E6%96%B0%E7%9A%84%E5%AD%98%E5%82%A8%E7%89%88%E6%9C%AC>将现有对象升级到新的存储版本</a> 章节。</li></ol><p>对于客户来说，在将对象升级到新的存储版本之前，期间和之后使用旧版本和新版本都是安全的。</p><p>删除旧版本：</p><ol><li>确保所有客户端都已完全迁移到新版本。kube-apiserver 可以查看日志以帮助识别仍通过进行访问的所有客户端旧版本。</li><li>在<code>spec.versions</code>列表中将旧版本的 served 设置为 false。如果任何客户端仍然意外地使用他们可能开始报告的旧版本尝试访问旧版本的自定义资源对象时出错。
如果发生这种情况，请切换回在旧版本上使用<code>served：true</code>，然后迁移其他客户使用新版本，然后重复此步骤。</li><li>确保已完成 <a href=#%E5%B0%86%E7%8E%B0%E6%9C%89%E5%AF%B9%E8%B1%A1%E5%8D%87%E7%BA%A7%E5%88%B0%E6%96%B0%E7%9A%84%E5%AD%98%E5%82%A8%E7%89%88%E6%9C%AC>将现有对象升级到新存储版本</a> 的步骤。<ol><li>在 CustomResourceDefinition 的<code>spec.versions</code>列表中，确认新版本的<code>stored</code>已设置为<code>true</code>。</li><li>确认旧版本不再列在 CustomResourceDefinition <code>status.storedVersions</code>。</li></ol></li><li>从 CustomResourceDefinition<code>spec.versions</code> 列表中删除旧版本。</li><li>在转换 webhooks 中放弃对旧版本的转换支持。</li></ol><h2 id=specify-multiple-versions>指定多个版本</h2><p>CustomResourceDefinition API 的<code>versions</code>字段可用于支持您自定义资源的多个版本已经开发的。版本可以具有不同的架构，并且转换 Webhooks 可以在版本之间转换自定义资源。
在适用的情况下，Webhook 转换应遵循 <a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md>Kubernetes API</a>。</p><blockquote class=note><div><strong>说明：</strong> 在 <code>apiextensions.k8s.io/v1beta1</code> 版本中，有一个 <code>version</code> 字段，名字不叫做 <code>versions</code>。
<code>version</code> 字段已经被废弃，成为可选项。不过如果该字段不是空，则必须与
<code>versions</code> 字段中的第一个条目匹配。</div></blockquote><p>此示例显示了两个版本的 CustomResourceDefinition。第一个例子，假设所有的版本共享相同的模式而它们之间没有转换。YAML 中的评论提供了更多背景信息。</p><div id=customresourcedefinition-versioning-example-1><ul><li><a href=#customresourcedefinition-versioning-example-1-0>apiextensions.k8s.io/v1</a></li><li><a href=#customresourcedefinition-versioning-example-1-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=customresourcedefinition-versioning-example-1-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>crontabs.example.com<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>group</span>:<span style=color:#bbb> </span>example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># list of versions supported by this CustomResourceDefinition</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>versions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1beta1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can be enabled/disabled by Served flag.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># One and only one version must be marked as the storage version.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># A schema is required</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>host</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>host</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># The conversion section is introduced in Kubernetes 1.13+ with a default value of</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># None conversion (strategy sub-field set to None).</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># None conversion assumes the same schema for all versions and only sets the apiVersion</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># field of custom resources to the proper value</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>None<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># either Namespaced or Cluster</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>scope</span>:<span style=color:#bbb> </span>Namespaced<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>names</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>plural</span>:<span style=color:#bbb> </span>crontabs<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># singular name to be used as an alias on the CLI and for display</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>singular</span>:<span style=color:#bbb> </span>crontab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind is normally the CamelCased singular type. Your resource manifests use this.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CronTab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># shortNames allow shorter string to match your resource on the CLI</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>shortNames</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- ct<span style=color:#bbb>
</span></code></pre></div></div><div id=customresourcedefinition-versioning-example-1-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>crontabs.example.com<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>group</span>:<span style=color:#bbb> </span>example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># list of versions supported by this CustomResourceDefinition</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>versions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1beta1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can be enabled/disabled by Served flag.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># One and only one version must be marked as the storage version.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>validation</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>host</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># The conversion section is introduced in Kubernetes 1.13+ with a default value of</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># None conversion (strategy sub-field set to None).</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># None conversion assumes the same schema for all versions and only sets the apiVersion</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># field of custom resources to the proper value</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>None<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># either Namespaced or Cluster</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>scope</span>:<span style=color:#bbb> </span>Namespaced<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>names</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>plural</span>:<span style=color:#bbb> </span>crontabs<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># singular name to be used as an alias on the CLI and for display</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>singular</span>:<span style=color:#bbb> </span>crontab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind is normally the CamelCased singular type. Your resource manifests use this.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CronTab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># shortNames allow shorter string to match your resource on the CLI</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>shortNames</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- ct<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#customresourcedefinition-versioning-example-1").tabs();});</script><p>你可以将 CustomResourceDefinition 存储在 YAML 文件中，然后使用<code>kubectl apply</code>来创建它。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl apply -f my-versioned-crontab.yaml
</code></pre></div><p>在创建之后，apiserver 开始在 HTTP REST 端点上为每个启用的版本提供服务。
在上面的示例中，API 版本可以在<code>/apis/example.com/v1beta1</code> 和 <code>/apis/example.com/v1</code>中获得。</p><h3 id=版本优先级>版本优先级</h3><p>不考虑 CustomResourceDefinition 中版本被定义的顺序，kubectl 使用具有最高优先级的版本作为访问对象的默认版本。
通过解析 <em>name</em> 字段确定优先级来决定版本号，稳定性（GA，Beta，或者 Alpha），以及该稳定性水平内的序列。</p><p>用于对版本进行排序的算法被设计成与 Kubernetes 项目对 Kubernetes 版本进行排序的方式相同。
版本以<code>v</code>开头跟一个数字，一个可选的<code>beta</code> 或者 <code>alpha</code>命名，和一个可选的附加的数字型的版本信息。
从广义上讲，版本字符串可能看起来像<code>v2</code>或者<code>v2beta1</code>。
使用以下算法对版本进行排序：</p><ul><li>遵循 Kubernetes 版本模式的条目在不符合条件的条目之前进行排序。</li><li>对于遵循 Kubernetes 版本模式的条目，版本字符串的数字部分从最大到最小排序。</li><li>如果字符串 <code>beta</code> 或 <code>alpha</code> 跟随第一数字部分，它们按顺序排序，在没有 <code>beta</code> 或 <code>alpha</code>
后缀（假定为 GA 版本）的等效字符串后面。</li><li>如果另一个数字跟在<code>beta</code>或<code>alpha</code>之后，那么这些数字也是从最大到最小排序。</li><li>不符合上述格式的字符串按字母顺序排序，数字部分不经过特殊处理。
请注意，在下面的示例中，<code>foo1</code>在 <code>foo10</code>上方排序。这与遵循 Kubernetes 版本模式的条目的数字部分排序不同。</li></ul><p>如果查看以下排序版本列表可以明白：</p><pre><code class=language-none data-lang=none>- v10
- v2
- v1
- v11beta2
- v10beta3
- v3beta1
- v12alpha1
- v11alpha2
- foo1
- foo10
</code></pre><p>对于 <a href=#specify-multiple-versions>指定多个版本</a> 中的示例，版本排序顺序为 <code>v1</code>，后跟着 <code>v1beta1</code>。
这导致了 kubectl 命令使用 <code>v1</code> 作为默认版本，除非提供对象指定版本。</p><h2 id=webhook转换>Webhook转换</h2><div style=margin-top:10px;margin-bottom:10px><b>FEATURE STATE:</b> <code>Kubernetes v1.16 [stable]</code></div><blockquote class=note><div><strong>说明：</strong> Webhook 转换在 Kubernetes 1.15 中作为 beta 功能。
要使用它，应启用<code>CustomResourceWebhookConversion</code>功能。
在大多数集群上，这类 beta 特性应该时自动启用的。
请参阅<a href=/zh/docs/reference/command-line-tools-reference/feature-gates/>特行门控</a> 文档以获得更多信息。</div></blockquote><p>上面的例子在版本之间有一个 None 转换，它只在转换时设置<code>apiVersion</code>字段而不改变对象的其余部分。apiserver 还支持在需要转换时调用外部服务的 webhook 转换。例如：</p><ul><li>自定义资源被要求在一个不同的版本里而不是一个存储的版本里。</li><li>Watch 在一个版本中创建，但更改对象存储在另一个版本中。</li><li>自定义资源 PUT 请求在一个不同的版本里而不是一个存储的版本。</li></ul><p>为了涵盖所有这些情况并通过 API 服务优化转换，转换对象可能包含多个对象，以便最大限度地减少外部调用。webhook 应该独立执行这些转换。</p><h3 id=编写一个转换-webhook-服务器>编写一个转换 Webhook 服务器</h3><p>请参考<a href=https://github.com/kubernetes/kubernetes/tree/v1.15.0/test/images/crd-conversion-webhook/main.go>自定义资源转换 webhook 服务</a> 的实施，这在 Kubernetes e2e 测试中得到验证。webhook 处理由 apiserver 发送的<code>ConversionReview</code>请求，并发送回包含在<code>ConversionResponse</code>中的转换结果。请注意，请求包含需要独立转换不改变对象顺序的自定义资源列表。示例服务器的组织方式使其可以重用于其他转换。大多数常见代码都位于 <a href=https://github.com/kubernetes/kubernetes/tree/v1.14.0/test/images/crd-conversion-webhook/converter/framework.go>框架文件</a> 中，只留下 <a href=https://github.com/kubernetes/kubernetes/blob/v1.13.0/test/images/crd-conversion-webhook/converter/example_converter.go#L29-L80>示例</a> 用于实施不同的转换。</p><blockquote class=note><div><strong>说明：</strong><p>示例转换 webhook 服务器留下<code>ClientAuth</code>字段为
<a href=https://github.com/kubernetes/kubernetes/tree/v1.13.0/test/images/crd-conversion-webhook/config.go#L47-L48>空</a>，
默认为<code>NoClientCert</code>。</p><p>这意味着 webhook 服务器没有验证客户端的身份，据称是 apiserver。</p><p>如果您需要相互 TLS 或者其他方式来验证客户端，请参阅如何
<a href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/#authenticate-apiservers>验证 API 服务</a>。</p></div></blockquote><h3 id=部署转换-webhook-服务>部署转换 Webhook 服务</h3><p>用于部署转换 webhook 的文档与
<a href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/#deploy_the_admission_webhook_service>准入webhook示例服务</a>。
下一节的假设是转换 webhook 服务器部署到<code>default</code>命名空间中名为<code>example-conversion-webhook-server</code>的服务器上，并在路径<code>/crdconvert</code>上提供流量。</p><blockquote class=note><div><strong>说明：</strong> 当 webhook 服务器作为一个部署到 Kubernetes 集群中的服务器时，它必须通过端口443上的服务器公开(服务器本身可以有一个任意端口，但是服务器对象应该将它映射到端口443)。
如果为服务器使用不同的端口，则 apiserver 和 webhook 服务器之间的通信可能会失败。</div></blockquote><h3 id=配置-customresourcedefinition-以使用转换-webhook>配置 CustomResourceDefinition 以使用转换 Webhook</h3><p>通过修改 <code>spec</code> 中的 <code>conversion</code> 部分，可以扩展 <code>None</code> 转换示例来使用转换 webhook。</p><div id=customresourcedefinition-versioning-example-2><ul><li><a href=#customresourcedefinition-versioning-example-2-0>apiextensions.k8s.io/v1</a></li><li><a href=#customresourcedefinition-versioning-example-2-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=customresourcedefinition-versioning-example-2-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>crontabs.example.com<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>group</span>:<span style=color:#bbb> </span>example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># list of versions supported by this CustomResourceDefinition</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>versions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1beta1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can be enabled/disabled by Served flag.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># One and only one version must be marked as the storage version.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can define it&#39;s own schema when there is no top-level</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># schema is defined.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>hostPort</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>host</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># a Webhook strategy instruct API server to call an external webhook for any conversion between custom resources.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># webhook is required when strategy is `Webhook` and it configures the webhook endpoint to be called by API server.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhook</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># conversionReviewVersions indicates what ConversionReview versions are understood/preferred by the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># The first version in the list understood by the API server is sent to the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># The webhook must respond with a ConversionReview object in the same version it received.</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>conversionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>namespace</span>:<span style=color:#bbb> </span>default<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>example-conversion-webhook-server<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>path</span>:<span style=color:#bbb> </span>/crdconvert<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># either Namespaced or Cluster</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>scope</span>:<span style=color:#bbb> </span>Namespaced<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>names</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>plural</span>:<span style=color:#bbb> </span>crontabs<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># singular name to be used as an alias on the CLI and for display</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>singular</span>:<span style=color:#bbb> </span>crontab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind is normally the CamelCased singular type. Your resource manifests use this.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CronTab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># shortNames allow shorter string to match your resource on the CLI</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>shortNames</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- ct<span style=color:#bbb>
</span></code></pre></div></div><div id=customresourcedefinition-versioning-example-2-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>crontabs.example.com<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>group</span>:<span style=color:#bbb> </span>example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># prunes object fields that are not specified in OpenAPI schemas below.</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>preserveUnknownFields</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># list of versions supported by this CustomResourceDefinition</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>versions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1beta1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can be enabled/disabled by Served flag.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># One and only one version must be marked as the storage version.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Each version can define it&#39;s own schema when there is no top-level</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># schema is defined.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>hostPort</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>served</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>storage</span>:<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>openAPIV3Schema</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>object<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>properties</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>host</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:#a2f;font-weight:700>type</span>:<span style=color:#bbb> </span>string<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># a Webhook strategy instruct API server to call an external webhook for any conversion between custom resources.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># webhookClientConfig is required when strategy is `Webhook` and it configures the webhook endpoint to be called by API server.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhookClientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>namespace</span>:<span style=color:#bbb> </span>default<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>example-conversion-webhook-server<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>path</span>:<span style=color:#bbb> </span>/crdconvert<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># either Namespaced or Cluster</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>scope</span>:<span style=color:#bbb> </span>Namespaced<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>names</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>plural</span>:<span style=color:#bbb> </span>crontabs<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># singular name to be used as an alias on the CLI and for display</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>singular</span>:<span style=color:#bbb> </span>crontab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind is normally the CamelCased singular type. Your resource manifests use this.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CronTab<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># shortNames allow shorter string to match your resource on the CLI</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>shortNames</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- ct<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#customresourcedefinition-versioning-example-2").tabs();});</script><p>您可以将 CustomResourceDefinition 保存在 YAML 文件中，然后使用<code>kubectl apply</code>来应用它。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl apply -f my-versioned-crontab-with-conversion.yaml
</code></pre></div><p>在应用新更改之前，请确保转换服务器已启动并正在运行。</p><h3 id=调用-webhook>调用 Webhook</h3><p>apiserver 一旦确定请求应发送到转换 webhook，它需要知道如何调用 webhook。这是在<code>webhookClientConfig</code>中指定的 webhook 配置。</p><p>转换 webhook 可以通过调用 URL 或服务，并且可以选择包含自定义 CA 包，以用于验证 TLS 连接。</p><h3 id=url>URL</h3><p>url 以标准 URL 形式给出 webhook 的位置（<code>scheme://host:port/path</code>）。
<code>host</code>不应引用集群中运行的服务；采用通过指定<code>service</code>字段来提供服务引用。
<code>host</code>可以通过某些 apiserver 中的外部 DNS 进行解析（即<code>kube-apiserver</code>无法解析集群内 DNS 违反分层规则）。主机也可以是 IP 地址。</p><p>请注意，除非您非常小心在所有主机上运行此 Webhook，否则 localhost 或 127.0.0.1 用作主机是风险很大的，运行一个 apiserver 可能需要对此进行调用
webhook。这样的安装很可能是不可移植的，即不容易出现在新集群中。</p><p>方案必须为<code>https</code>：URL 必须以<code>https://</code>开头。</p><p>尝试使用用户或基本身份验证，例如不允许使用<code>user:password@</code>。片段（<code>#...</code>）和查询参数（<code>?...</code>）也不允许。</p><p>这是配置为调用 URL 的转换 Webhook 的示例（并且期望使用系统信任根来验证 TLS 证书，因此不指定 caBundle）：</p><div id=customresourcedefinition-versioning-example-3><ul><li><a href=#customresourcedefinition-versioning-example-3-0>apiextensions.k8s.io/v1</a></li><li><a href=#customresourcedefinition-versioning-example-3-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=customresourcedefinition-versioning-example-3-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhook</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>url</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;https://my-webhook.example.com:9443/my-webhook-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=customresourcedefinition-versioning-example-3-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhookClientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>url</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;https://my-webhook.example.com:9443/my-webhook-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#customresourcedefinition-versioning-example-3").tabs();});</script><h3 id=服务引用>服务引用</h3><p><code>webhookClientConfig</code>内部的<code>service</code>段是对转换 webhook 服务的引用。如果 Webhook 在集群中运行，则应使用<code>service</code>而不是<code>url</code>。
服务名称空间和名称是必需的。端口是可选的，默认为 443。该路径是可选的，默认为<code>/</code>。</p><p>这是一个配置为在端口<code>1234</code>上调用服务的 Webhook 的示例在子路径<code>/my-path</code>下，并针对 ServerName 验证 TLS 连接
使用自定义 CA 捆绑包的<code>my-service-name.my-service-namespace.svc</code>。</p><div id=customresourcedefinition-versioning-example-4><ul><li><a href=#customresourcedefinition-versioning-example-4-0>apiextensions.k8s.io/v1</a></li><li><a href=#customresourcedefinition-versioning-example-4-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=customresourcedefinition-versioning-example-4-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1b<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhook</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>namespace</span>:<span style=color:#bbb> </span>my-service-namespace<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>my-service-name<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>path</span>:<span style=color:#bbb> </span>/my-path<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>1234</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=customresourcedefinition-versioning-example-4-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhookClientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>namespace</span>:<span style=color:#bbb> </span>my-service-namespace<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>my-service-name<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>path</span>:<span style=color:#bbb> </span>/my-path<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>1234</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#customresourcedefinition-versioning-example-4").tabs();});</script><h2 id=webhook-请求和响应>Webhook 请求和响应</h2><h3 id=请求>请求</h3><p>向 Webhooks 发送 POST 请求，请求的内容类型为：application/json，与 APIapitensions.k8s.io API 组中的 ConversionReview API 对象一起使用序列化为 JSON 作为主体。</p><p>Webhooks 可以指定他们接受的<code>ConversionReview</code>对象的版本在其 CustomResourceDefinition 中使用<code>conversionReviewVersions</code>字段：</p><div id=conversionreviewversions><ul><li><a href=#conversionreviewversions-0>apiextensions.k8s.io/v1</a></li><li><a href=#conversionreviewversions-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=conversionreviewversions-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>webhook</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>conversionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>      </span>...<span style=color:#bbb>
</span></code></pre></div><p>创建时，<code>conversionReviewVersions</code>是必填字段<code>apiextensions.k8s.io/v1</code>自定义资源定义。
需要 Webhooks 支持至少一个<code>ConversionReview</code>当前和以前的 apiserver 可以理解的版本。</p></div><div id=conversionreviewversions-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiextensions.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>CustomResourceDefinition<span style=color:#bbb>
</span><span style=color:#bbb></span>...<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>conversion</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>strategy</span>:<span style=color:#bbb> </span>Webhook<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>conversionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span></code></pre></div><p>如果未指定<code>conversionReviewVersions</code>，则创建时的默认值 apiextensions.k8s.io/v1beta1 自定义资源定义为 v1beta1。</p></div></div><script>$(function(){$("#conversionreviewversions").tabs();});</script><p>API servers send the first <code>ConversionReview</code> version in the <code>conversionReviewVersions</code> list they support.
If none of the versions in the list are supported by the API server, the custom resource definition will not be allowed to be created.
If an API server encounters a conversion webhook configuration that was previously created and does not support any of the <code>ConversionReview</code>
versions the API server knows how to send, attempts to call to the webhook will fail.</p><p>此示例显示了包含在<code>ConversionReview</code>对象中的数据请求将<code>CronTab</code>对象转换为<code>example.com/v1</code>：</p><div id=conversionreview-request><ul><li><a href=#conversionreview-request-0>apiextensions.k8s.io/v1</a></li><li><a href=#conversionreview-request-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=conversionreview-request-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;request&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Random uid uniquely identifying this conversion call</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># The API group and version the objects should be converted to</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;desiredAPIVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># The list of objects to convert.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># May contain one or more objects, in one or more versions.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;objects&#34;: </span>[<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-04T14:03:02Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;local-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;default&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;143&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;3415a7fc-162b-4300-b5da-fd6083580d66&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;hostPort&#34;: </span><span style=color:#b44>&#34;localhost:1234&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>},<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-03T13:02:01Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;remote-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;12893&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;359a83ec-b575-460d-b553-d859cedde8a0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;hostPort&#34;: </span><span style=color:#b44>&#34;example.com:2345&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div><div id=conversionreview-request-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;request&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Random uid uniquely identifying this conversion call</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># The API group and version the objects should be converted to</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;desiredAPIVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># The list of objects to convert.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># May contain one or more objects, in one or more versions.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;objects&#34;: </span>[<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-04T14:03:02Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;local-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;default&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;143&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;3415a7fc-162b-4300-b5da-fd6083580d66&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;hostPort&#34;: </span><span style=color:#b44>&#34;localhost:1234&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>},<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-03T13:02:01Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;remote-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;12893&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;359a83ec-b575-460d-b553-d859cedde8a0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;hostPort&#34;: </span><span style=color:#b44>&#34;example.com:2345&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#conversionreview-request").tabs();});</script><h3 id=响应>响应</h3><p>Webhooks 响应是以 200 HTTP 状态代码，<code>Content-Type:application/json</code>，和包含 ConversionReview 对象的主体（与发送的版本相同），
带有<code>response</code>节的序列，并序列化为 JSON。</p><p>如果转换成功，则 Webhook 应该返回包含以下字段的<code>response</code>节：</p><ul><li><code>uid</code>，从发送到 webhook 的<code>request.uid</code>复制而来</li><li><code>result</code>，设置为<code>{"status":"Success"}}</code></li><li><code>convertedObjects</code>，包含来自<code>request.objects</code>的所有对象，转换为<code>request.desiredVersion</code></li></ul><p>Webhook 的最简单成功响应示例：</p><div id=conversionreview-response-success><ul><li><a href=#conversionreview-response-success-0>apiextensions.k8s.io/v1</a></li><li><a href=#conversionreview-response-success-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=conversionreview-response-success-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;response&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># must match &lt;request.uid&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;result&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;status&#34;: </span><span style=color:#b44>&#34;Success&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Objects must match the order of request.objects, and have apiVersion set to &lt;request.desiredAPIVersion&gt;.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind, metadata.uid, metadata.name, and metadata.namespace fields must not be changed by the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># metadata.labels and metadata.annotations fields may be changed by the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># All other changes to metadata fields by the webhook are ignored.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;convertedObjects&#34;: </span>[<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-04T14:03:02Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;local-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;default&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;143&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;3415a7fc-162b-4300-b5da-fd6083580d66&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;host&#34;: </span><span style=color:#b44>&#34;localhost&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;port&#34;: </span><span style=color:#b44>&#34;1234&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>},<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-03T13:02:01Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;remote-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;12893&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;359a83ec-b575-460d-b553-d859cedde8a0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;host&#34;: </span><span style=color:#b44>&#34;example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;port&#34;: </span><span style=color:#b44>&#34;2345&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div><div id=conversionreview-response-success-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;response&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># must match &lt;request.uid&gt;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;result&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;status&#34;: </span><span style=color:#b44>&#34;Failed&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># Objects must match the order of request.objects, and have apiVersion set to &lt;request.desiredAPIVersion&gt;.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># kind, metadata.uid, metadata.name, and metadata.namespace fields must not be changed by the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># metadata.labels and metadata.annotations fields may be changed by the webhook.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># All other changes to metadata fields by the webhook are ignored.</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;convertedObjects&#34;: </span>[<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-04T14:03:02Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;local-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;default&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;143&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;3415a7fc-162b-4300-b5da-fd6083580d66&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;host&#34;: </span><span style=color:#b44>&#34;localhost&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;port&#34;: </span><span style=color:#b44>&#34;1234&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>},<span style=color:#bbb>
</span><span style=color:#bbb>      </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;CronTab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;example.com/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;metadata&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;creationTimestamp&#34;: </span><span style=color:#b44>&#34;2019-09-03T13:02:01Z&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;remote-crontab&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;resourceVersion&#34;: </span><span style=color:#b44>&#34;12893&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>          </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;359a83ec-b575-460d-b553-d859cedde8a0&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>},<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;host&#34;: </span><span style=color:#b44>&#34;example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>&#34;port&#34;: </span><span style=color:#b44>&#34;2345&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#conversionreview-response-success").tabs();});</script><p>如果转换失败，则 Webhook 应该返回包含以下字段的<code>response</code>节：
*<code>uid</code>，从发送到 webhook 的<code>request.uid</code>复制而来
*<code>result</code>，设置为<code>{"status":"Failed"}</code></p><blockquote class=warning><div><strong>警告：</strong><p>转换失败会破坏对自定义资源的读写访问，包括更新或删除资源的能力。转换失败应尽可能避免使用，并且不应用于强制验证
约束（改用验证模式 或 Webhook admission）。</div></blockquote><p>来自 Webhook 的响应示例，指示转换请求失败，并带有可选消息：</p><div id=conversionreview-response-failure><ul><li><a href=#conversionreview-response-failure-0>apiextensions.k8s.io/v1</a></li><li><a href=#conversionreview-response-failure-1>apiextensions.k8s.io/v1beta1</a></li></ul><div id=conversionreview-response-failure-0><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;response&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;result&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;status&#34;: </span><span style=color:#b44>&#34;Failed&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;message&#34;: </span><span style=color:#b44>&#34;hostPort could not be parsed into a separate host and port&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div><div id=conversionreview-response-failure-1><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;apiextensions.k8s.io/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;ConversionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>&#34;response&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>&#34;result&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;status&#34;: </span><span style=color:#b44>&#34;Failed&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>&#34;message&#34;: </span><span style=color:#b44>&#34;hostPort could not be parsed into a separate host and port&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div></div><script>$(function(){$("#conversionreview-response-failure").tabs();});</script><h2 id=编写-读取和更新版本化的-customresourcedefinition-对象>编写、读取和更新版本化的 CustomResourceDefinition 对象</h2><p>写入对象时，它将保留在写入时指定为存储版本的版本中。如果存储版本发生变化，现有对象永远不会自动转换。然而，新创建或更新的对象将在新的存储版本中编写。对象可能已在不再被服务的版本中编写。</p><p>当读取对象时，将版本指定为路径的一部分。
如果指定的版本与对象的持久版本不同，Kubernetes 会在您请求的版本里将对象返还给您，但是在提供请求时，持久化对象既不会在磁盘上更改，也不会以任何方式进行转换（除了更改<code>apiVersion</code>字符串）。您可以在当前提供的任何版本中请求对象。</p><p>如果您更新了一个现有对象，它将在现在的存储版本中被重写。
这是对象可以从一个版本改到另一个版本的唯一办法。</p><p>为了说明这一点，请考虑以下假设的一系列事件：</p><ol><li>存储版本是<code>v1beta1</code>。
它保存在版本<code>v1beta1</code>的存储中。</li><li>您将版本<code>v1</code>添加到 CustomResourceDefinition 中，并将其指定为存储版本。</li><li>您在版本<code>v1beta1</code>中读取您的对象，然后您再次在版本<code>v1</code>中读取对象。
除了 apiVersion 字段之外，两个返回的对象都是相同的。</li><li>您创建一个新对象。
它存储在版本<code>v1</code>的存储中。
您现在有两个对象，其中一个位于<code>v1beta1</code>，另一个位于<code>v1</code>。</li><li>您更新第一个对象。
它现在保存在版本<code>v1</code>中，因为那是当前的存储版本。</li></ol><h3 id=以前的存储版本>以前的存储版本</h3><p>API 服务在状态字段<code>storedVersions</code>中记录曾被标记为存储版本的每个版本。
对象可能已被保留在任何曾被指定为存储版本的版本中。
从未成为存储版本的版本的存储中不能存在任何对象。</p><h2 id=将现有对象升级到新的存储版本>将现有对象升级到新的存储版本</h2><p>弃用版本并删除支持时，请设计存储升级过程。
以下是从<code>v1beta1</code>升级到<code>v1</code>的示例过程。</p><ol><li>将<code>v1</code>设置为 CustomResourceDefinition 文件中的存储，并使用 kubectl 应用它。
<code>storedVersions</code>现在是<code>v1beta1、 v1</code>。</li><li>编写升级过程以列出所有现有对象并使用相同内容编写它们。
这会强制后端在当前存储版本中写入对象，即<code>v1</code>。</li><li>通过从<code>storedVersions</code>字段中删除<code>v1beta1</code>来更新 CustomResourceDefinition<code>Status</code>。</li></ol><div id=pre-footer><h2>反馈</h2><p class=feedback--prompt>此页是否对您有帮助？</p><button class="btn btn-primary mb-4 feedback--yes">是</button>
<button class="btn btn-primary mb-4 feedback--no">否</button><p class="feedback--response feedback--response__hidden">感谢反馈。如果您有一个关于如何使用 Kubernetes 的特定的、需要答案的问题，可以访问
<a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/kubernetes>Stack Overflow</a>.
在 GitHub 仓库上登记新的问题
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">报告问题</a>
或者
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">提出改进建议</a>.</p></div><script>const yes=document.querySelector('.feedback--yes');const no=document.querySelector('.feedback--no');document.querySelectorAll('.feedback--link').forEach(link=>{link.href=link.href+window.location.pathname;});const sendFeedback=(value)=>{if(!gtag){console.log('!gtag');}
gtag('event','click',{'event_category':'Helpful','event_label':window.location.pathname,value});};const disableButtons=()=>{yes.disabled=true;yes.classList.add('feedback--button__disabled');no.disabled=true;no.classList.add('feedback--button__disabled');};yes.addEventListener('click',()=>{sendFeedback(1);disableButtons();document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');});no.addEventListener('click',()=>{sendFeedback(0);disableButtons();document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');});</script><div id=pre-footer><hr><div class=issue-button-container><script type=text/javascript>PDRTJS_settings_8345992={"id":"8345992","unique_id":"\/zh\/docs\/tasks\/extend-kubernetes\/custom-resources\/custom-resource-definition-versioning\/","title":"用户自定义资源的版本","permalink":"https:\/\/kubernetes.io\/zh\/docs\/tasks\/extend-kubernetes\/custom-resources\/custom-resource-definition-versioning\/"};(function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=("https:"==document.location.protocol)?"https://polldaddy.com/js/rating/rating.js":"http://i0.poll.fm/js/rating/rating.js";s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,"script","pd-rating-js"));</script><a class="btn btn-primary mb-4 issue" href onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20'+
'k8s.io'+window.location.pathname)">报告 GitHub 问题</a>
<a class="btn btn-primary mb-4 issue" href=https://github.com/kubernetes/website/edit/master/content/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning.md>修改本页面</a></div><div class="lastedit issue-button-container" id=lastedit>页面最后一次修改于
August 16, 2020 at 4:31 PM PST
由：
<a href=https://github.com/kubernetes/website/commit/dabb6d689605ea0a9175f10795cfea2d39d21353/>[zh] Tidy up and fix links in tasks section (9/10)</a>
(<a href=https://github.com/kubernetes/website/commits/master/content/en/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning.md>页面历史</a>)</div></div></main><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><nav id=TableOfContents><ul><li><a href=#准备开始>准备开始</a></li><li><a href=#概览>概览</a></li><li><a href=#specify-multiple-versions>指定多个版本</a><ul><li><a href=#版本优先级>版本优先级</a></li></ul></li><li><a href=#webhook转换>Webhook转换</a><ul><li><a href=#编写一个转换-webhook-服务器>编写一个转换 Webhook 服务器</a></li><li><a href=#部署转换-webhook-服务>部署转换 Webhook 服务</a></li><li><a href=#配置-customresourcedefinition-以使用转换-webhook>配置 CustomResourceDefinition 以使用转换 Webhook</a></li><li><a href=#调用-webhook>调用 Webhook</a></li><li><a href=#url>URL</a></li><li><a href=#服务引用>服务引用</a></li></ul></li><li><a href=#webhook-请求和响应>Webhook 请求和响应</a><ul><li><a href=#请求>请求</a></li><li><a href=#响应>响应</a></li></ul></li><li><a href=#编写-读取和更新版本化的-customresourcedefinition-对象>编写、读取和更新版本化的 CustomResourceDefinition 对象</a><ul><li><a href=#以前的存储版本>以前的存储版本</a></li></ul></li><li><a href=#将现有对象升级到新的存储版本>将现有对象升级到新的存储版本</a></li></ul></nav></div></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh/docs/home/>主页</a>
<a class=text-white href=/zh/blog/>博客</a>
<a class=text-white href=/zh/training/>培训</a>
<a class=text-white href=/zh/partners/>合作伙伴</a>
<a class=text-white href=/zh/community/>社区</a>
<a class=text-white href=/zh/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.4c88b9704d4f4a0c299df9314d9912a9d1b77eed43f42923d7e1efd15c8ed139.js integrity="sha256-TIi5cE1PSgwpnfkxTZkSqdG3fu1D9Ckj1+Hv0VyO0Tk=" crossorigin=anonymous></script></body></html>