<!doctype html><html lang=zh class=no-js><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-36037335-10');</script><link rel=alternate hreflang=en href=https://kubernetes.io/docs/concepts/workloads/controllers/deployment/><link rel=alternate hreflang=ko href=https://kubernetes.io/ko/docs/concepts/workloads/controllers/deployment/><link rel=alternate hreflang=ja href=https://kubernetes.io/ja/docs/concepts/workloads/controllers/deployment/><link rel=alternate hreflang=fr href=https://kubernetes.io/fr/docs/concepts/workloads/controllers/deployment/><link rel=alternate hreflang=es href=https://kubernetes.io/es/docs/concepts/workloads/controllers/deployment/><link rel=alternate hreflang=id href=https://kubernetes.io/id/docs/concepts/workloads/controllers/deployment/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>Deployments | Kubernetes</title><meta property="og:title" content="Deployments"><meta property="og:description" content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><meta property="og:type" content="article"><meta property="og:url" content="https://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment/"><meta property="article:modified_time" content="2020-08-12T19:26:12+08:00"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="Deployments"><meta itemprop=description content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><meta itemprop=dateModified content="2020-08-12T19:26:12+08:00"><meta itemprop=wordCount content="2706"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Deployments"><meta name=twitter:description content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><link rel=preload href=/scss/main.min.29d9d9a40037804116049b9cb05556d3c544759c5ed8a73b36824ddcb7c27564.css as=style><link href=/scss/main.min.29d9d9a40037804116049b9cb05556d3c544759c5ed8a73b36824ddcb7c27564.css rel=stylesheet integrity><script src=/js/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png"}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/base_fonts.css><link rel=stylesheet href=/css/jquery-ui.min.css><link rel=stylesheet href=/css/callouts.css><link rel=stylesheet href=/css/custom-jekyll/tags.css><meta name=description content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><meta property="og:description" content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><meta name=twitter:description content="一个 Deployment 控制器为 Pods和 ReplicaSets提供描述性的更新方式。
描述 Deployment 中的 desired state，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。
说明： 不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。  用例 以下是典型的 Deployments 用例：
 创建 Deployment 以展开 ReplicaSet 。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。   声明 Pod 的新状态 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。   回滚到较早的 Deployment 版本，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。   扩展 Deployment 以承担更多负载."><meta property="og:url" content="https://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment/"><meta property="og:title" content="Deployments"><meta name=twitter:title content="Deployments"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/jquery-ui-1.12.1.min.js></script><script src=/js/sweetalert-2.1.2.min.js></script><script src=/js/script.js></script><title>Deployments | Kubernetes</title></head><body class="td-page td-documentation"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh/docs/>文档</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/blog/>Kubernetes 博客</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/training/>培训</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/partners/>合作伙伴</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/community/>社区</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/case-studies/>案例分析</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Versions</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://kubernetes.io>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io>v1.21</a>
<a class=dropdown-item href=https://v1-20.docs.kubernetes.io>v1.20</a>
<a class=dropdown-item href=https://v1-19.docs.kubernetes.io>v1.19</a>
<a class=dropdown-item href=https://v1-18.docs.kubernetes.io>v1.18</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 Chinese</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/concepts/workloads/controllers/deployment/>English</a>
<a class=dropdown-item href=/ko/docs/concepts/workloads/controllers/deployment/>한국어 Korean</a>
<a class=dropdown-item href=/ja/docs/concepts/workloads/controllers/deployment/>日本語 Japanese</a>
<a class=dropdown-item href=/fr/docs/concepts/workloads/controllers/deployment/>Français</a>
<a class=dropdown-item href=/es/docs/concepts/workloads/controllers/deployment/>Español</a>
<a class=dropdown-item href=/id/docs/concepts/workloads/controllers/deployment/>Bahasa Indonesia</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav><div class=header-filler></div></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-md-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" name=q placeholder="&#xf002 搜索" aria-label=搜索 autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><ul><li class="collapse show" id=zh-docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/home/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">主页</a></li><ul><li class=collapse id=zh-docs-home><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-home-supported-doc-versions href=/zh/docs/home/supported-doc-versions/>Kubernetes 文档支持的版本</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">入门</a></li><ul><li class=collapse id=zh-docs-setup><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/release/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 发行说明和版本偏差</a></li><ul><li class=collapse id=zh-docs-setup-release><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-notes href=/zh/docs/setup/release/notes/>v1.18 发布说明</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-version-skew-policy href=/zh/docs/setup/release/version-skew-policy/>Kubernetes 版本及版本倾斜支持策略</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/learning-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习环境</a></li><ul><li class=collapse id=zh-docs-setup-learning-environment><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-learning-environment-kind target=_blank href=/docs/setup/learning-environment/kind/>Installing Kubernetes with Kind <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-learning-environment-minikube href=/zh/docs/setup/learning-environment/minikube/>使用 Minikube 安装 Kubernetes</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-independent-create-cluster-kubeadm href=/zh/docs/setup/independent/create-cluster-kubeadm/>使用 kubeadm 创建一个单主集群</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">生产环境</a></li><ul><li class=collapse id=zh-docs-setup-production-environment><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-container-runtimes href=/zh/docs/setup/production-environment/container-runtimes/>容器运行时</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/turnkey/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Turnkey 云解决方案</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-turnkey><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-turnkey-gce target=_blank href=/docs/setup/production-environment/turnkey/gce/>Running Kubernetes on Google Compute Engine <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-icp href=/zh/docs/setup/production-environment/turnkey/icp/>使用 IBM Cloud Private 在多个云上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-aws href=/zh/docs/setup/production-environment/turnkey/aws/>在 AWS EC2 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-azure href=/zh/docs/setup/production-environment/turnkey/azure/>在 Azure 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-clc href=/zh/docs/setup/production-environment/turnkey/clc/>在 CenturyLink Cloud 上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-tencent href=/zh/docs/setup/production-environment/turnkey/tencent/>在腾讯云容器服务上运行 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-alibaba-cloud href=/zh/docs/setup/production-environment/turnkey/alibaba-cloud/>在阿里云上运行 Kubernetes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用部署工具安装 Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 kubeadm 引导集群</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-install-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/>安装 kubeadm</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-troubleshooting-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/>对 kubeadm 进行故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-tools-kubeadm-create-cluster-kubeadm target=_blank href=/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/>Creating a cluster with kubeadm <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-control-plane-flags href=/zh/docs/setup/production-environment/tools/kubeadm/control-plane-flags/>使用 kubeadm 定制控制平面配置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-ha-topology href=/zh/docs/setup/production-environment/tools/kubeadm/ha-topology/>高可用拓扑选项</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-high-availability href=/zh/docs/setup/production-environment/tools/kubeadm/high-availability/>利用 kubeadm 创建高可用集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-setup-ha-etcd-with-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/>使用 kubeadm 创建一个高可用 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-kubelet-integration href=/zh/docs/setup/production-environment/tools/kubeadm/kubelet-integration/>使用 kubeadm 配置集群中的每个 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-self-hosting href=/zh/docs/setup/production-environment/tools/kubeadm/self-hosting/>配置您的 kubernetes 集群以自托管控制平台</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kops href=/zh/docs/setup/production-environment/tools/kops/>使用 Kops 安装 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-tools-kubespray target=_blank href=/docs/setup/production-environment/tools/kubespray/>Installing Kubernetes with Kubespray <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/on-premises-vm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">本地 VMs</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-on-premises-vm><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-on-premises-vm-cloudstack target=_blank href=/docs/setup/production-environment/on-premises-vm/cloudstack/>Cloudstack <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-on-premises-vm-dcos href=/zh/docs/setup/production-environment/on-premises-vm/dcos/>DC/OS 上的 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-on-premises-vm-ovirt href=/zh/docs/setup/production-environment/on-premises-vm/ovirt/>oVirt</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/windows/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Windows Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-windows><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-production-environment-windows-intro-windows-in-kubernetes target=_blank href=/docs/setup/production-environment/windows/intro-windows-in-kubernetes/>Intro to Windows support in Kubernetes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-windows-user-guide-windows-containers href=/zh/docs/setup/production-environment/windows/user-guide-windows-containers/>Kubernetes 中调度 Windows 容器的指南</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/best-practices/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">最佳实践</a></li><ul><li class=collapse id=zh-docs-setup-best-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-setup-best-practices-multiple-zones target=_blank href=/docs/setup/best-practices/multiple-zones/>Running in multiple zones <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-cluster-large href=/zh/docs/setup/best-practices/cluster-large/>创建大型集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-node-conformance href=/zh/docs/setup/best-practices/node-conformance/>校验节点设置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-certificates href=/zh/docs/setup/best-practices/certificates/>PKI 证书和要求</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献新内容</a></li><ul><li class=collapse id=zh-docs-contribute><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-suggest-improvements href=/zh/docs/contribute/suggest-improvements/>提出内容改进建议</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/new-content/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献新内容</a></li><ul><li class=collapse id=zh-docs-contribute-new-content><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-overview href=/zh/docs/contribute/new-content/overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-open-a-pr href=/zh/docs/contribute/new-content/open-a-pr/>发起拉取请求（PR）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-new-features href=/zh/docs/contribute/new-content/new-features/>为发行版本撰写文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-blogs-case-studies href=/zh/docs/contribute/new-content/blogs-case-studies/>博客和案例分析</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/review/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">评阅变更</a></li><ul><li class=collapse id=zh-docs-contribute-review><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-reviewing-prs href=/zh/docs/contribute/review/reviewing-prs/>评阅 PRs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-for-approvers href=/zh/docs/contribute/review/for-approvers/>评阅人和批准人</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-localization href=/zh/docs/contribute/localization/>本地化 Kubernetes 文档</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/participate/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参与 SIG Docs</a></li><ul><li class=collapse id=zh-docs-contribute-participate><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-roles-and-responsibilities href=/zh/docs/contribute/participate/roles-and-responsibilities/>角色与责任</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-pr-wranglers href=/zh/docs/contribute/participate/pr-wranglers/>PR 管理者</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/generate-ref-docs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考文档概述</a></li><ul><li class=collapse id=zh-docs-contribute-generate-ref-docs><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-contribute-upstream href=/zh/docs/contribute/generate-ref-docs/contribute-upstream/>为上游 Kubernetes 代码库做出贡献</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-quickstart href=/zh/docs/contribute/generate-ref-docs/quickstart/>快速入门</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-api href=/zh/docs/contribute/generate-ref-docs/kubernetes-api/>为 Kubernetes API 生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubectl href=/zh/docs/contribute/generate-ref-docs/kubectl/>为 kubectl 命令集生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-components href=/zh/docs/contribute/generate-ref-docs/kubernetes-components/>为 Kubernetes 组件和工具生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-prerequisites-ref-docs href=/zh/docs/contribute/generate-ref-docs/prerequisites-ref-docs/></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/style/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">文档样式概述</a></li><ul><li class=collapse id=zh-docs-contribute-style><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-guide href=/zh/docs/contribute/style/content-guide/>内容指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-style-guide href=/zh/docs/contribute/style/style-guide/>样式指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-write-new-topic href=/zh/docs/contribute/style/write-new-topic/>撰写新主题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-page-content-types href=/zh/docs/contribute/style/page-content-types/>页面内容类型</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-organization href=/zh/docs/contribute/style/content-organization/>内容组织</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-hugo-shortcodes href=/zh/docs/contribute/style/hugo-shortcodes/>定制 Hugo 短代码</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-advanced href=/zh/docs/contribute/advanced/>高级贡献</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">概念</a></li><ul><li class="collapse show" id=zh-docs-concepts><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概述</a></li><ul><li class=collapse id=zh-docs-concepts-overview><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-what-is-kubernetes href=/zh/docs/concepts/overview/what-is-kubernetes/>Kubernetes 是什么？</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-components href=/zh/docs/concepts/overview/components/>Kubernetes 组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-kubernetes-api href=/zh/docs/concepts/overview/kubernetes-api/>Kubernetes API</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/working-with-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-concepts-overview-working-with-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-kubernetes-objects href=/zh/docs/concepts/overview/working-with-objects/kubernetes-objects/>理解 Kubernetes 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-object-management href=/zh/docs/concepts/overview/working-with-objects/object-management/>Kubernetes 对象管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-names href=/zh/docs/concepts/overview/working-with-objects/names/>对象名称和 IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-namespaces href=/zh/docs/concepts/overview/working-with-objects/namespaces/>名字空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-labels href=/zh/docs/concepts/overview/working-with-objects/labels/>标签和选择算符</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-annotations href=/zh/docs/concepts/overview/working-with-objects/annotations/>注解</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-field-selectors href=/zh/docs/concepts/overview/working-with-objects/field-selectors/>字段选择器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-common-labels href=/zh/docs/concepts/overview/working-with-objects/common-labels/>推荐使用的标签</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 架构</a></li><ul><li class=collapse id=zh-docs-concepts-architecture><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-nodes href=/zh/docs/concepts/architecture/nodes/>节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-control-plane-node-communication href=/zh/docs/concepts/architecture/control-plane-node-communication/>控制面到节点通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-cloud-controller href=/zh/docs/concepts/architecture/cloud-controller/>云控制器管理器的基础概念</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-controller href=/zh/docs/concepts/architecture/controller/>控制器</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/containers/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">容器</a></li><ul><li class=collapse id=zh-docs-concepts-containers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-images href=/zh/docs/concepts/containers/images/>镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-environment href=/zh/docs/concepts/containers/container-environment/>容器环境</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-runtime-class href=/zh/docs/concepts/containers/runtime-class/>容器运行时类(Runtime Class)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-lifecycle-hooks href=/zh/docs/concepts/containers/container-lifecycle-hooks/>容器生命周期回调</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">工作负载</a></li><ul><li class="collapse show" id=zh-docs-concepts-workloads><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/pods/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pods</a></li><ul><li class=collapse id=zh-docs-concepts-workloads-pods><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-lifecycle href=/zh/docs/concepts/workloads/pods/pod-lifecycle/>Pod 的生命周期</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-podpreset href=/zh/docs/concepts/workloads/pods/podpreset/>Pod Preset</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-topology-spread-constraints href=/zh/docs/concepts/workloads/pods/pod-topology-spread-constraints/>Pod 拓扑扩展约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-disruptions href=/zh/docs/concepts/workloads/pods/disruptions/>干扰（Disruptions）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-ephemeral-containers href=/zh/docs/concepts/workloads/pods/ephemeral-containers/>临时容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-init-containers href=/zh/docs/concepts/workloads/pods/init-containers/>Init 容器</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/controllers/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">控制器</a></li><ul><li class="collapse show" id=zh-docs-concepts-workloads-controllers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicaset href=/zh/docs/concepts/workloads/controllers/replicaset/>ReplicaSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicationcontroller href=/zh/docs/concepts/workloads/controllers/replicationcontroller/>ReplicationController</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-zh-docs-concepts-workloads-controllers-deployment href=/zh/docs/concepts/workloads/controllers/deployment/>Deployments</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-statefulset href=/zh/docs/concepts/workloads/controllers/statefulset/>StatefulSets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-daemonset href=/zh/docs/concepts/workloads/controllers/daemonset/>DaemonSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-job href=/zh/docs/concepts/workloads/controllers/job/>Jobs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-ttlafterfinished href=/zh/docs/concepts/workloads/controllers/ttlafterfinished/>已完成资源的 TTL 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-garbage-collection href=/zh/docs/concepts/workloads/controllers/garbage-collection/>垃圾收集</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-cron-jobs href=/zh/docs/concepts/workloads/controllers/cron-jobs/>CronJob</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/storage/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">存储</a></li><ul><li class=collapse id=zh-docs-concepts-storage><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volumes href=/zh/docs/concepts/storage/volumes/>卷</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-storage-persistent-volumes target=_blank href=/docs/concepts/storage/persistent-volumes/>Persistent Volumes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshots href=/zh/docs/concepts/storage/volume-snapshots/>卷快照</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-pvc-datasource href=/zh/docs/concepts/storage/volume-pvc-datasource/>CSI 卷克隆</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshot-classes href=/zh/docs/concepts/storage/volume-snapshot-classes/>卷快照类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-classes href=/zh/docs/concepts/storage/storage-classes/>存储类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-dynamic-provisioning href=/zh/docs/concepts/storage/dynamic-provisioning/>动态卷供应</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-limits href=/zh/docs/concepts/storage/storage-limits/>特定于节点的卷数限制</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-concepts-configuration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-overview href=/zh/docs/concepts/configuration/overview/>配置最佳实践</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-configmap href=/zh/docs/concepts/configuration/configmap/>ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-pod-overhead href=/zh/docs/concepts/configuration/pod-overhead/>Pod 开销</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-secret href=/zh/docs/concepts/configuration/secret/>Secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-manage-resources-containers href=/zh/docs/concepts/configuration/manage-resources-containers/>为容器管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-resource-bin-packing href=/zh/docs/concepts/configuration/resource-bin-packing/>扩展资源的资源装箱</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-organize-cluster-access-kubeconfig href=/zh/docs/concepts/configuration/organize-cluster-access-kubeconfig/>使用 kubeconfig 文件组织集群访问</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-configuration-pod-priority-preemption target=_blank href=/docs/concepts/configuration/pod-priority-preemption/>Pod Priority and Preemption <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/services-networking/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">服务、负载均衡和联网</a></li><ul><li class=collapse id=zh-docs-concepts-services-networking><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service-topology href=/zh/docs/concepts/services-networking/service-topology/>Service 拓扑</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service href=/zh/docs/concepts/services-networking/service/>服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-endpoint-slices href=/zh/docs/concepts/services-networking/endpoint-slices/>端点切片（Endpoint Slices）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dns-pod-service href=/zh/docs/concepts/services-networking/dns-pod-service/>Pod 与 Service 的 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-connect-applications-service href=/zh/docs/concepts/services-networking/connect-applications-service/>使用 Service 连接到应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress href=/zh/docs/concepts/services-networking/ingress/>Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress-controllers href=/zh/docs/concepts/services-networking/ingress-controllers/>Ingress 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-network-policies href=/zh/docs/concepts/services-networking/network-policies/>网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-add-entries-to-pod-etc-hosts-with-host-aliases href=/zh/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/>使用 HostAliases 向 Pod /etc/hosts 文件添加条目</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dual-stack href=/zh/docs/concepts/services-networking/dual-stack/>IPv4/IPv6 双协议栈</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安全</a></li><ul><li class=collapse id=zh-docs-concepts-security><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-security-overview target=_blank href=/docs/concepts/security/overview/>Overview of Cloud Native Security <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-security-pod-security-standards target=_blank href=/docs/concepts/security/pod-security-standards/>Pod Security Standards <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/scheduling-eviction/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">调度和驱逐(Scheduling and Eviction)</a></li><ul><li class=collapse id=zh-docs-concepts-scheduling-eviction><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-taint-and-toleration href=/zh/docs/concepts/scheduling-eviction/taint-and-toleration/>污点和容忍度</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-kube-scheduler href=/zh/docs/concepts/scheduling-eviction/kube-scheduler/>Kubernetes 调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-assign-pod-node href=/zh/docs/concepts/scheduling-eviction/assign-pod-node/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduling-framework href=/zh/docs/concepts/scheduling-eviction/scheduling-framework/>调度框架</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduler-perf-tuning href=/zh/docs/concepts/scheduling-eviction/scheduler-perf-tuning/>调度器性能调优</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/cluster-administration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群管理</a></li><ul><li class=collapse id=zh-docs-concepts-cluster-administration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-certificates href=/zh/docs/concepts/cluster-administration/certificates/>证书</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-cloud-providers href=/zh/docs/concepts/cluster-administration/cloud-providers/>云驱动</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-manage-deployment href=/zh/docs/concepts/cluster-administration/manage-deployment/>管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-networking href=/zh/docs/concepts/cluster-administration/networking/>集群网络系统</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-monitoring href=/zh/docs/concepts/cluster-administration/monitoring/>Kubernetes 控制面的指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-logging href=/zh/docs/concepts/cluster-administration/logging/>日志架构</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-kubelet-garbage-collection href=/zh/docs/concepts/cluster-administration/kubelet-garbage-collection/>配置 kubelet 垃圾回收策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-proxies href=/zh/docs/concepts/cluster-administration/proxies/>Kubernetes 中的代理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-controller-metrics href=/zh/docs/concepts/cluster-administration/controller-metrics/>控制器管理器指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-cluster-administration-flow-control target=_blank href=/docs/concepts/cluster-administration/flow-control/>API Priority and Fairness <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-addons href=/zh/docs/concepts/cluster-administration/addons/>安装扩展（Addons）</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-extend-cluster href=/zh/docs/concepts/extend-kubernetes/extend-cluster/>扩展 Kubernetes 集群</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/api-extension/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes API</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-api-extension><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-concepts-extend-kubernetes-api-extension-custom-resources target=_blank href=/docs/concepts/extend-kubernetes/api-extension/custom-resources/>Custom Resources <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-api-extension-apiserver-aggregation href=/zh/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/>通过聚合层扩展 Kubernetes API</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-operator href=/zh/docs/concepts/extend-kubernetes/operator/>Operator 模式</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">计算、存储和网络扩展</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-compute-storage-net><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-network-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/>网络插件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-device-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/>设备插件</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-service-catalog href=/zh/docs/concepts/extend-kubernetes/service-catalog/>服务目录</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/policy/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">策略</a></li><ul><li class=collapse id=zh-docs-concepts-policy><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-resource-quotas href=/zh/docs/concepts/policy/resource-quotas/>资源配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-limit-range href=/zh/docs/concepts/policy/limit-range/>限制范围</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-pod-security-policy href=/zh/docs/concepts/policy/pod-security-policy/>Pod 安全策略</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">任务</a></li><ul><li class=collapse id=zh-docs-tasks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-tasks-tools><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-kubectl href=/zh/docs/tasks/tools/install-kubectl/>安装并配置 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-minikube href=/zh/docs/tasks/tools/install-minikube/>安装 Minikube</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">用 kubeadm 进行管理</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-upgrade href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/>升级 kubeadm 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-kubeadm-adding-windows-nodes target=_blank href=/docs/tasks/administer-cluster/kubeadm/adding-windows-nodes/>Adding Windows nodes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-kubeadm-upgrading-windows-nodes target=_blank href=/docs/tasks/administer-cluster/kubeadm/upgrading-windows-nodes/>Upgrading Windows nodes <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-certs href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/>使用 kubeadm 进行证书管理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/manage-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理内存，CPU 和 API 资源</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-manage-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/>为命名空间配置默认的内存请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-default-namespace/>为命名空间配置默认的 CPU 请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-constraint-namespace/>配置命名空间的最小和最大内存约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/>为命名空间配置 CPU 最小和最大约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-memory-cpu-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/>为命名空间配置内存和 CPU 配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-pod-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-pod-namespace/>配置命名空间下 Pod 配额</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/network-policy-provider/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装网络规则驱动</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-network-policy-provider><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-calico-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/calico-network-policy/>使用 Calico 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-cilium-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/cilium-network-policy/>使用 Cilium 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-kube-router-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/kube-router-network-policy/>使用 kube-router 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-romana-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/romana-network-policy/>使用 Romana 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-weave-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/weave-network-policy/>使用 Weave Net 提供 NetworkPolicy</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-enabling-service-topology target=_blank href=/docs/tasks/administer-cluster/enabling-service-topology/>Enabling Service Topology <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-ip-masq-agent href=/zh/docs/tasks/administer-cluster/ip-masq-agent/>IP Masquerade Agent 用户指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-running-cloud-controller href=/zh/docs/tasks/administer-cluster/running-cloud-controller/>Kubernetes 云管理控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-administer-cluster-safely-drain-node target=_blank href=/docs/tasks/administer-cluster/safely-drain-node/>Safely Drain a Node while Respecting the PodDisruptionBudget <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-configure-upgrade-etcd href=/zh/docs/tasks/administer-cluster/configure-upgrade-etcd/>为 Kubernetes 运行 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reserve-compute-resources href=/zh/docs/tasks/administer-cluster/reserve-compute-resources/>为系统守护进程预留计算资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-extended-resource-node href=/zh/docs/tasks/administer-cluster/extended-resource-node/>为节点发布扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-coredns href=/zh/docs/tasks/administer-cluster/coredns/>使用 CoreDNS 进行服务发现</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kms-provider href=/zh/docs/tasks/administer-cluster/kms-provider/>使用 KMS 提供商进行数据加密</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-api href=/zh/docs/tasks/administer-cluster/access-cluster-api/>使用 Kubernetes API 访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-securing-a-cluster href=/zh/docs/tasks/administer-cluster/securing-a-cluster/>保护集群安全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-guaranteed-scheduling-critical-addon-pods href=/zh/docs/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/>关键插件 Pod 的调度保证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces-walkthrough href=/zh/docs/tasks/administer-cluster/namespaces-walkthrough/>名字空间演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-enabling-endpointslices href=/zh/docs/tasks/administer-cluster/enabling-endpointslices/>启用端点切片</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-nodelocaldns href=/zh/docs/tasks/administer-cluster/nodelocaldns/>在 Kubernetes 集群中使用 NodeLocal DNSCache</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-sysctl-cluster href=/zh/docs/tasks/administer-cluster/sysctl-cluster/>在 Kubernetes 集群中使用 sysctl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reconfigure-kubelet href=/zh/docs/tasks/administer-cluster/reconfigure-kubelet/>在运行中的集群上重新配置节点的 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-declare-network-policy href=/zh/docs/tasks/administer-cluster/declare-network-policy/>声明网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-developing-cloud-controller-manager href=/zh/docs/tasks/administer-cluster/developing-cloud-controller-manager/>开发云控制器管理器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cpu-management-policies href=/zh/docs/tasks/administer-cluster/cpu-management-policies/>控制节点上的 CPU 管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-topology-manager href=/zh/docs/tasks/administer-cluster/topology-manager/>控制节点上的拓扑管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-highly-available-master href=/zh/docs/tasks/administer-cluster/highly-available-master/>搭建高可用的 Kubernetes Masters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-default-storage-class href=/zh/docs/tasks/administer-cluster/change-default-storage-class/>改变默认 StorageClass</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-pv-reclaim-policy href=/zh/docs/tasks/administer-cluster/change-pv-reclaim-policy/>更改 PersistentVolume 的回收策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-horizontal-autoscaling href=/zh/docs/tasks/administer-cluster/dns-horizontal-autoscaling/>自动扩缩集群 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-custom-nameservers href=/zh/docs/tasks/administer-cluster/dns-custom-nameservers/>自定义 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-services href=/zh/docs/tasks/administer-cluster/access-cluster-services/>访问集群上运行的服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-debugging-resolution href=/zh/docs/tasks/administer-cluster/dns-debugging-resolution/>调试 DNS 问题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces href=/zh/docs/tasks/administer-cluster/namespaces/>通过命名空间共享集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubelet-config-file href=/zh/docs/tasks/administer-cluster/kubelet-config-file/>通过配置文件设置 Kubelet 参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-quota-api-object href=/zh/docs/tasks/administer-cluster/quota-api-object/>配置 API 对象配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-out-of-resource href=/zh/docs/tasks/administer-cluster/out-of-resource/>配置资源不足时的处理方式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-limit-storage-consumption href=/zh/docs/tasks/administer-cluster/limit-storage-consumption/>限制存储消耗</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cluster-management href=/zh/docs/tasks/administer-cluster/cluster-management/>集群管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-encrypt-data href=/zh/docs/tasks/administer-cluster/encrypt-data/>静态加密 Secret 数据</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/configure-pod-container/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置 Pods 和容器</a></li><ul><li class=collapse id=zh-docs-tasks-configure-pod-container><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-memory-resource href=/zh/docs/tasks/configure-pod-container/assign-memory-resource/>为容器和 Pod 分配内存资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-configure-gmsa target=_blank href=/docs/tasks/configure-pod-container/configure-gmsa/>Configure GMSA for Windows Pods and containers <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-runasusername href=/zh/docs/tasks/configure-pod-container/configure-runasusername/>为 Windows 的 Pod 和容器配置 RunAsUserName</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-cpu-resource href=/zh/docs/tasks/configure-pod-container/assign-cpu-resource/>为容器和 Pods 分配 CPU 资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-quality-service-pod href=/zh/docs/tasks/configure-pod-container/quality-service-pod/>配置 Pod 的服务质量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-extended-resource href=/zh/docs/tasks/configure-pod-container/extended-resource/>为容器分派扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-volume-storage/>配置 Pod 以使用卷进行存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-persistent-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/>配置 Pod 以使用 PersistentVolume 作为存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-projected-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-projected-volume-storage/>配置 Pod 使用投射卷作存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-security-context target=_blank href=/docs/tasks/configure-pod-container/security-context/>Configure a Security Context for a Pod or Container <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-service-account href=/zh/docs/tasks/configure-pod-container/configure-service-account/>为 Pod 配置服务账户</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-pull-image-private-registry href=/zh/docs/tasks/configure-pod-container/pull-image-private-registry/>从私有仓库拉取镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-liveness-readiness-startup-probes href=/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/>配置存活、就绪和启动探测器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-configure-pod-container-assign-pods-nodes-using-node-affinity target=_blank href=/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/>Assign Pods to Nodes using Node Affinity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-pods-nodes href=/zh/docs/tasks/configure-pod-container/assign-pods-nodes/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-initialization href=/zh/docs/tasks/configure-pod-container/configure-pod-initialization/>配置 Pod 初始化</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-attach-handler-lifecycle-event href=/zh/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/>为容器的生命周期事件设置处理函数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-configmap href=/zh/docs/tasks/configure-pod-container/configure-pod-configmap/>配置 Pod 使用 ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-share-process-namespace href=/zh/docs/tasks/configure-pod-container/share-process-namespace/>在 Pod 中的容器之间共享进程命名空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-static-pod href=/zh/docs/tasks/configure-pod-container/static-pod/>创建静态 Pod</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-translate-compose-kubernetes href=/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/>将 Docker Compose 文件转换为 Kubernetes 资源</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-kubernetes-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-tasks-manage-kubernetes-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-declarative-config target=_blank href=/docs/tasks/manage-kubernetes-objects/declarative-config/>Declarative Management of Kubernetes Objects Using Configuration Files <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-kustomization target=_blank href=/docs/tasks/manage-kubernetes-objects/kustomization/>Declarative Management of Kubernetes Objects Using Kustomize <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-imperative-command target=_blank href=/docs/tasks/manage-kubernetes-objects/imperative-command/>Managing Kubernetes Objects Using Imperative Commands <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-imperative-config href=/zh/docs/tasks/manage-kubernetes-objects/imperative-config/>使用配置文件对 Kubernetes 对象进行命令式管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-manage-kubernetes-objects-update-api-object-kubectl-patch target=_blank href=/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch/>Update API Objects in Place Using kubectl patch <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/inject-data-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">给应用注入数据</a></li><ul><li class=collapse id=zh-docs-tasks-inject-data-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-command-argument-container href=/zh/docs/tasks/inject-data-application/define-command-argument-container/>为容器设置启动时要执行的命令和参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-inject-data-application-define-interdependent-environment-variables target=_blank href=/docs/tasks/inject-data-application/define-interdependent-environment-variables/>Define Dependent Environment Variables <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-environment-variable-container href=/zh/docs/tasks/inject-data-application/define-environment-variable-container/>为容器设置环境变量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-environment-variable-expose-pod-information href=/zh/docs/tasks/inject-data-application/environment-variable-expose-pod-information/>通过环境变量将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-downward-api-volume-expose-pod-information href=/zh/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/>通过文件将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-distribute-credentials-secure href=/zh/docs/tasks/inject-data-application/distribute-credentials-secure/>使用 Secret 安全地分发凭证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-podpreset href=/zh/docs/tasks/inject-data-application/podpreset/>使用 PodPreset 将信息注入 Pod</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/run-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行应用</a></li><ul><li class=collapse id=zh-docs-tasks-run-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-replicated-stateful-application href=/zh/docs/tasks/run-application/run-replicated-stateful-application/>运行一个有状态的应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-update-api-object-kubectl-patch href=/zh/docs/tasks/run-application/update-api-object-kubectl-patch/>使用 kubectl patch 更新 API 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-delete-stateful-set href=/zh/docs/tasks/run-application/delete-stateful-set/>删除 StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-force-delete-stateful-set-pod href=/zh/docs/tasks/run-application/force-delete-stateful-set-pod/>强制删除 StatefulSet 类型的 Pods</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale href=/zh/docs/tasks/run-application/horizontal-pod-autoscale/>Pod 水平自动扩缩</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale-walkthrough href=/zh/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/>Horizontal Pod Autoscaler 演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-configure-pdb href=/zh/docs/tasks/run-application/configure-pdb/>为应用程序设置干扰预算（Disruption Budget）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-stateless-application-deployment href=/zh/docs/tasks/run-application/run-stateless-application-deployment/>使用Deployment运行一个无状态应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-scale-stateful-set href=/zh/docs/tasks/run-application/scale-stateful-set/>扩缩 StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-single-instance-stateful-application href=/zh/docs/tasks/run-application/run-single-instance-stateful-application/>运行一个单实例有状态应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/job/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行 Jobs</a></li><ul><li class=collapse id=zh-docs-tasks-job><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-automated-tasks-with-cron-jobs href=/zh/docs/tasks/job/automated-tasks-with-cron-jobs/>使用 CronJob 运行自动化任务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-parallel-processing-expansion href=/zh/docs/tasks/job/parallel-processing-expansion/>使用扩展进行并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-coarse-parallel-processing-work-queue href=/zh/docs/tasks/job/coarse-parallel-processing-work-queue/>使用工作队列进行粗粒度并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-fine-parallel-processing-work-queue href=/zh/docs/tasks/job/fine-parallel-processing-work-queue/>使用工作队列进行精细的并行处理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/access-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">访问集群中的应用程序</a></li><ul><li class=collapse id=zh-docs-tasks-access-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-web-ui-dashboard href=/zh/docs/tasks/access-application-cluster/web-ui-dashboard/>Web 界面 (Dashboard)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-access-cluster href=/zh/docs/tasks/access-application-cluster/access-cluster/>访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-port-forward-access-application-cluster href=/zh/docs/tasks/access-application-cluster/port-forward-access-application-cluster/>使用端口转发来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-service-access-application-cluster href=/zh/docs/tasks/access-application-cluster/service-access-application-cluster/>使用服务来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-connecting-frontend-backend href=/zh/docs/tasks/access-application-cluster/connecting-frontend-backend/>使用 Service 把前端连接到后端</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-create-external-load-balancer href=/zh/docs/tasks/access-application-cluster/create-external-load-balancer/>创建外部负载均衡器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-cloud-provider-firewall href=/zh/docs/tasks/access-application-cluster/configure-cloud-provider-firewall/>配置你的云平台防火墙</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-list-all-running-container-images href=/zh/docs/tasks/access-application-cluster/list-all-running-container-images/>列出集群中所有运行容器的镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-ingress-minikube href=/zh/docs/tasks/access-application-cluster/ingress-minikube/>在 Minikube 环境中使用 NGINX Ingress 控制器配置 Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-dns-cluster href=/zh/docs/tasks/access-application-cluster/configure-dns-cluster/>为集群配置 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-communicate-containers-same-pod-shared-volume href=/zh/docs/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/>同 Pod 内的容器使用共享卷通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-access-multiple-clusters href=/zh/docs/tasks/access-application-cluster/configure-access-multiple-clusters/>配置对多集群的访问</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/debug-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">监控、日志和排错</a></li><ul><li class=collapse id=zh-docs-tasks-debug-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-debug-application-cluster-debug-running-pod target=_blank href=/docs/tasks/debug-application-cluster/debug-running-pod/>Debug Running Pods <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-debug-application-cluster-logging-stackdriver target=_blank href=/docs/tasks/debug-application-cluster/logging-stackdriver/>Logging Using Stackdriver <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-events-stackdriver href=/zh/docs/tasks/debug-application-cluster/events-stackdriver/>StackDriver 中的事件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-crictl href=/zh/docs/tasks/debug-application-cluster/crictl/>使用 crictl 对 Kubernetes 节点进行调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-logging-elasticsearch-kibana href=/zh/docs/tasks/debug-application-cluster/logging-elasticsearch-kibana/>使用 ElasticSearch 和 Kibana 进行日志管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-local-debugging href=/zh/docs/tasks/debug-application-cluster/local-debugging/>在本地开发和调试服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-audit href=/zh/docs/tasks/debug-application-cluster/audit/>审计</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application href=/zh/docs/tasks/debug-application-cluster/debug-application/>应用故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application-introspection href=/zh/docs/tasks/debug-application-cluster/debug-application-introspection/>应用自测与调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-troubleshooting href=/zh/docs/tasks/debug-application-cluster/troubleshooting/>排错</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-determine-reason-pod-failure href=/zh/docs/tasks/debug-application-cluster/determine-reason-pod-failure/>确定 Pod 失败的原因</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-monitor-node-health href=/zh/docs/tasks/debug-application-cluster/monitor-node-health/>节点健康监测</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-get-shell-running-container href=/zh/docs/tasks/debug-application-cluster/get-shell-running-container/>获取正在运行容器的 Shell</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-init-containers href=/zh/docs/tasks/debug-application-cluster/debug-init-containers/>调试 Init 容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-pod-replication-controller href=/zh/docs/tasks/debug-application-cluster/debug-pod-replication-controller/>调试 Pods 和 ReplicationControllers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-service href=/zh/docs/tasks/debug-application-cluster/debug-service/>调试 Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-stateful-set href=/zh/docs/tasks/debug-application-cluster/debug-stateful-set/>调试StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-metrics-pipeline href=/zh/docs/tasks/debug-application-cluster/resource-metrics-pipeline/>资源指标管道</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-usage-monitoring href=/zh/docs/tasks/debug-application-cluster/resource-usage-monitoring/>资源监控工具</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-cluster href=/zh/docs/tasks/debug-application-cluster/debug-cluster/>集群故障排查</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class=collapse id=zh-docs-tasks-extend-kubernetes><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/custom-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用自定义资源</a></li><ul><li class=collapse id=zh-docs-tasks-extend-kubernetes-custom-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definitions target=_blank href=/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/>Extend the Kubernetes API with CustomResourceDefinitions <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definition-versioning href=/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/>用户自定义资源的版本</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-aggregation-layer href=/zh/docs/tasks/extend-kubernetes/configure-aggregation-layer/>配置聚合层</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-setup-extension-api-server href=/zh/docs/tasks/extend-kubernetes/setup-extension-api-server/>安装一个扩展的 API server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-multiple-schedulers href=/zh/docs/tasks/extend-kubernetes/configure-multiple-schedulers/>配置多个调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-http-proxy-access-api href=/zh/docs/tasks/extend-kubernetes/http-proxy-access-api/>使用 HTTP 代理访问 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-extend-kubernetes-setup-konnectivity target=_blank href=/docs/tasks/extend-kubernetes/setup-konnectivity/>Set up Konnectivity service <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">TLS</a></li><ul><li class=collapse id=zh-docs-tasks-tls><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tls-manual-rotation-of-ca-certificates target=_blank href=/docs/tasks/tls/manual-rotation-of-ca-certificates/>Manual Rotation of CA Certificates <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-certificate-rotation href=/zh/docs/tasks/tls/certificate-rotation/>为 kubelet 配置证书轮换</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-managing-tls-in-a-cluster href=/zh/docs/tasks/tls/managing-tls-in-a-cluster/>管理集群中的 TLS 认证</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-daemon/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群守护进程</a></li><ul><li class=collapse id=zh-docs-tasks-manage-daemon><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-update-daemon-set href=/zh/docs/tasks/manage-daemon/update-daemon-set/>对 DaemonSet 执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-rollback-daemon-set href=/zh/docs/tasks/manage-daemon/rollback-daemon-set/>对 DaemonSet 执行回滚</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/service-catalog/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装服务目录</a></li><ul><li class=collapse id=zh-docs-tasks-service-catalog><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-helm href=/zh/docs/tasks/service-catalog/install-service-catalog-using-helm/>使用 Helm 安装 Service Catalog</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-sc href=/zh/docs/tasks/service-catalog/install-service-catalog-using-sc/>使用 SC 安装服务目录</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/network/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">网络</a></li><ul><li class=collapse id=zh-docs-tasks-network><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-network-validate-dual-stack href=/zh/docs/tasks/network/validate-dual-stack/>验证 IPv4/IPv6 双协议栈</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubectl-kubectl-plugins href=/zh/docs/tasks/extend-kubectl/kubectl-plugins/>用插件扩展 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-hugepages-scheduling-hugepages href=/zh/docs/tasks/manage-hugepages/scheduling-hugepages/>管理巨页（HugePages）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-gpus-scheduling-gpus href=/zh/docs/tasks/manage-gpus/scheduling-gpus/>调度 GPUs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">教程</a></li><ul><li class=collapse id=zh-docs-tutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-hello-minikube href=/zh/docs/tutorials/hello-minikube/>你好 Minikube</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习 Kubernetes 基础知识</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/create-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">创建集群</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-create-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-intro href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/>使用 Minikube 创建集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-interactive href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-interactive/>交互式教程 - 创建集群</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/deploy-app/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">部署应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-deploy-app><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-intro href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/>使用 kubectl 创建 Deployment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-interactive href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/>交互式教程 - 部署应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/explore/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">了解你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-explore><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-intro href=/zh/docs/tutorials/kubernetes-basics/explore/explore-intro/>查看 pod 和工作节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-interactive href=/zh/docs/tutorials/kubernetes-basics/explore/explore-interactive/>交互式教程-了解你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/expose/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">公开地暴露你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-expose><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-intro href=/zh/docs/tutorials/kubernetes-basics/expose/expose-intro/>使用 Service 暴露您的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-interactive href=/zh/docs/tutorials/kubernetes-basics/expose/expose-interactive/>交互式教程 - 暴露你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/scale/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">缩放你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-scale><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-intro href=/zh/docs/tutorials/kubernetes-basics/scale/scale-intro/>运行应用程序的多个实例</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-interactive href=/zh/docs/tutorials/kubernetes-basics/scale/scale-interactive/>交互教程 - 缩放你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/update/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">更新你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-update><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-intro href=/zh/docs/tutorials/kubernetes-basics/update/update-intro/>执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-interactive href=/zh/docs/tutorials/kubernetes-basics/update/update-interactive/>交互式教程 - 更新你的应用</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/online-training/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">在线培训课程</a></li><ul><li class=collapse id=zh-docs-tutorials-online-training><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-online-training-overview href=/zh/docs/tutorials/online-training/overview/>Kubernetes 在线培训概述</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-tutorials-configuration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-configuration-configure-redis-using-configmap href=/zh/docs/tutorials/configuration/configure-redis-using-configmap/>使用 ConfigMap 来配置 Redis</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateless-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">无状态应用程序</a></li><ul><li class=collapse id=zh-docs-tutorials-stateless-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-expose-external-ip-address href=/zh/docs/tutorials/stateless-application/expose-external-ip-address/>公开外部 IP 地址以访问集群中应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-guestbook href=/zh/docs/tutorials/stateless-application/guestbook/>示例：使用 Redis 部署 PHP 留言板应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tutorials-stateless-application-guestbook-logs-metrics-with-elk target=_blank href=/docs/tutorials/stateless-application/guestbook-logs-metrics-with-elk/>Example: Add logging and metrics to the PHP / Redis Guestbook example <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateful-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">有状态的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-stateful-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-mysql-wordpress-persistent-volume href=/zh/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/>示例：使用 Persistent Volumes 部署 WordPress 和 MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-basic-stateful-set href=/zh/docs/tutorials/stateful-application/basic-stateful-set/>StatefulSet 基础</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-cassandra href=/zh/docs/tutorials/stateful-application/cassandra/>示例：使用 Stateful Sets 部署 Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-zookeeper href=/zh/docs/tutorials/stateful-application/zookeeper/>运行 ZooKeeper， 一个 CP 分布式系统</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/clusters/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群</a></li><ul><li class=collapse id=zh-docs-tutorials-clusters><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-clusters-apparmor href=/zh/docs/tutorials/clusters/apparmor/>AppArmor</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/services/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Services</a></li><ul><li class=collapse id=zh-docs-tutorials-services><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-services-source-ip href=/zh/docs/tutorials/services/source-ip/>使用 Source IP</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考</a></li><ul><li class=collapse id=zh-docs-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-glossary href=/zh/docs/reference/glossary/>标准化词汇表</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/issues-security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 问题和安全</a></li><ul><li class=collapse id=zh-docs-reference-issues-security><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-issues href=/zh/docs/reference/issues-security/issues/>Kubernetes 问题追踪</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-security href=/zh/docs/reference/issues-security/security/>Kubernetes 安全和信息披露</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/using-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 Kubernetes API</a></li><ul><li class=collapse id=zh-docs-reference-using-api><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-api-overview href=/zh/docs/reference/using-api/api-overview/>Kubernetes API 总览</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-api-concepts target=_blank href=/docs/reference/using-api/api-concepts/>Kubernetes API Concepts <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-client-libraries href=/zh/docs/reference/using-api/client-libraries/>客户端库</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-deprecation-policy target=_blank href=/docs/reference/using-api/deprecation-policy/>Kubernetes Deprecation Policy <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-health-checks target=_blank href=/docs/reference/using-api/health-checks/>Kubernetes API health endpoints <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/access-authn-authz/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">访问 API</a></li><ul><li class=collapse id=zh-docs-reference-access-authn-authz><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-access-authn-authz-authentication target=_blank href=/docs/reference/access-authn-authz/authentication/>Authenticating <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-access-authn-authz-certificate-signing-requests target=_blank href=/docs/reference/access-authn-authz/certificate-signing-requests/>Certificate Signing Requests <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-admission-controllers href=/zh/docs/reference/access-authn-authz/admission-controllers/>使用准入控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-extensible-admission-controllers href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>动态准入控制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-authorization href=/zh/docs/reference/access-authn-authz/authorization/>授权概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-rbac href=/zh/docs/reference/access-authn-authz/rbac/>使用 RBAC 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-node href=/zh/docs/reference/access-authn-authz/node/>使用 Node 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-webhook href=/zh/docs/reference/access-authn-authz/webhook/>Webhook 模式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-controlling-access href=/zh/docs/reference/access-authn-authz/controlling-access/>Kubernetes API 访问控制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-abac href=/zh/docs/reference/access-authn-authz/abac/>使用 ABAC 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-bootstrap-tokens href=/zh/docs/reference/access-authn-authz/bootstrap-tokens/>使用启动引导令牌（Bootstrap Tokens）认证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-service-accounts-admin href=/zh/docs/reference/access-authn-authz/service-accounts-admin/>管理 Service Accounts</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubernetes-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API 参考</a></li><ul><li class=collapse id=zh-docs-reference-kubernetes-api><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubernetes-api-api-index href=/zh/docs/reference/kubernetes-api/api-index/>v1.17</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubernetes-api-labels-annotations-taints href=/zh/docs/reference/kubernetes-api/labels-annotations-taints/>知名标签（Label）、注解（Annotation）和 Taints</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools-kubeadm><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/setup-tools/kubeadm/generated/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm Generated</a></li><ul><li class=collapse id=docs-reference-setup-tools-kubeadm-generated><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-certificate-key target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_certificate-key/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-check-expiration target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_check-expiration/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-admin-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_admin.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-controller-manager-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_controller-manager.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-healthcheck-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-peer target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-peer/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-etcd-server target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-server/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-front-proxy-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_front-proxy-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-certs-renew-scheduler-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_scheduler.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig-user target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig_user/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config-enable-dynamic target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_enable-dynamic/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting-pivot target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting_pivot/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-completion target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_completion/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-list target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_list/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-pull target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_pull/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-migrate target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_migrate/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-init-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_init-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-join-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_join-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-view target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_view/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-coredns target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_coredns/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-kube-proxy target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_kube-proxy/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-bootstrap-token target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_bootstrap-token/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-healthcheck-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-peer target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-peer/><small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm href=/zh/docs/reference/setup-tools/kubeadm/kubeadm/>kubeadm 概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init/>kubeadm init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join/>kubeadm join</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/>kubeadm upgrade</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-config href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-config/>kubeadm config</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset/>kubeadm reset</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-token href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-token/>kubeadm 令牌</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-version href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-version/>kubeadm version</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-alpha href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-alpha/>kubeadm alpha</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init-phase/>kubeadm init phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join-phase/>kubeadm join phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset-phase/>kubeadm reset phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade-phase/>kubeadm upgrade phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-implementation-details target=_blank href=/docs/reference/setup-tools/kubeadm/implementation-details/>Implementation details <small>(EN)</small></a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubectl/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">kubectl 命令行界面</a></li><ul><li class=collapse id=zh-docs-reference-kubectl><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-overview href=/zh/docs/reference/kubectl/overview/>kubectl 概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-jsonpath href=/zh/docs/reference/kubectl/jsonpath/>JSONPath 支持</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl href=/zh/docs/reference/kubectl/kubectl/>kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl-cmds href=/zh/docs/reference/kubectl/kubectl-cmds/>kubectl 命令</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-cheatsheet href=/zh/docs/reference/kubectl/cheatsheet/>kubectl 备忘单</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-conventions href=/zh/docs/reference/kubectl/conventions/>kubectl 的用法约定</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-docker-cli-to-kubectl href=/zh/docs/reference/kubectl/docker-cli-to-kubectl/>适用于 Docker 用户的 kubectl</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/command-line-tools-reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">命令行工具参考</a></li><ul><li class=collapse id=zh-docs-reference-command-line-tools-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-feature-gates href=/zh/docs/reference/command-line-tools-reference/feature-gates/>特性门控</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-scheduler href=/zh/docs/reference/command-line-tools-reference/kube-scheduler/>kube-scheduler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet href=/zh/docs/reference/command-line-tools-reference/kubelet/>kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-command-line-tools-reference-cloud-controller-manager target=_blank href=/docs/reference/command-line-tools-reference/cloud-controller-manager/>cloud-controller-manager <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-controller-manager href=/zh/docs/reference/command-line-tools-reference/kube-controller-manager/>kube-controller-manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-proxy href=/zh/docs/reference/command-line-tools-reference/kube-proxy/>kube-proxy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-apiserver href=/zh/docs/reference/command-line-tools-reference/kube-apiserver/>kube-apiserver</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-authentication-authorization href=/zh/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/>Kubelet authentication/authorization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-tls-bootstrapping href=/zh/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/>TLS bootstrapping</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/scheduling/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Scheduling</a></li><ul><li class=collapse id=docs-reference-scheduling><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-scheduling-policies target=_blank href=/docs/reference/scheduling/policies/>Scheduling Policies <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-scheduling-profiles target=_blank href=/docs/reference/scheduling/profiles/>Scheduling Profiles <small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-tools href=/zh/docs/reference/tools/>工具</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-sitemap href=/zh/docs/sitemap/></a><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-test target=_blank href=/docs/test/>Docs smoke test page <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-search href=/zh/docs/search/>搜索结果</a></li></ul></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/>文档</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/concepts/>概念</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/concepts/workloads/>工作负载</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/concepts/workloads/controllers/>控制器</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment/>Deployments</a></li></ol></nav><section id=deprecation-warning><div class="content deprecation-warning"><h3>您正在查看 Kubernetes 版本的文档： v1.18</h3><p>Kubernetes v1.18 版本的文档已不再维护。您现在看到的版本来自于一份静态的快照。如需查阅最新文档，请点击
<a href=https://kubernetes.io/docs/home/>最新版本。</a></p></div></section><div class=td-content><p><a href=https://github.com/kubernetes/website/edit/master/content/zh/docs/concepts/workloads/controllers/deployment.md id=editPageButton target=_blank data-proofer-ignore>Edit This Page</a></p><h1>Deployments</h1><p>一个 <em>Deployment</em> 控制器为 <a href=/zh/docs/concepts/workloads/pods/>Pods</a>和 <a href=/zh/docs/concepts/workloads/controllers/replicaset/>ReplicaSets</a>提供描述性的更新方式。</p><p>描述 Deployment 中的 <em>desired state</em>，并且 Deployment 控制器以受控速率更改实际状态，以达到期望状态。可以定义 Deployments 以创建新的 ReplicaSets ，或删除现有 Deployments ，并通过新的 Deployments 使用其所有资源。</p><blockquote class=note><div><strong>说明：</strong><p>不要管理 Deployment 拥有的 ReplicaSets 。如果存在下面未介绍的用例，请考虑在主 Kubernetes 仓库中提出 issue。</div></blockquote><h2 id=用例>用例</h2><p>以下是典型的 Deployments 用例：</p><ul><li><a href=#creating-a-deployment>创建 Deployment 以展开 ReplicaSet </a>。 ReplicaSet 在后台创建 Pods。检查 ReplicaSet 展开的状态，查看其是否成功。</li></ul><ul><li><a href=#updating-a-deployment>声明 Pod 的新状态</a> 通过更新 Deployment 的 PodTemplateSpec。将创建新的 ReplicaSet ，并且 Deployment 管理器以受控速率将 Pod 从旧 ReplicaSet 移动到新 ReplicaSet 。每个新的 ReplicaSet 都会更新 Deployment 的修改历史。</li></ul><ul><li><a href=#rolling-back-a-deployment>回滚到较早的 Deployment 版本</a>，如果 Deployment 的当前状态不稳定。每次回滚都会更新 Deployment 的修改。</li></ul><ul><li><a href=#scaling-a-deployment>扩展 Deployment 以承担更多负载</a>.</li></ul><ul><li><a href=#pausing-and-resuming-a-deployment>暂停 Deployment</a> 对其 PodTemplateSpec 进行修改，然后恢复它以启动新的展开。</li></ul><ul><li><a href=#deployment-status>使用 Deployment 状态</a> 作为卡住展开的指示器。</li></ul><ul><li><a href=#clean-up-policy>清理较旧的 ReplicaSets</a> ，那些不再需要的。</li></ul><h2 id=创建-deployment>创建 Deployment</h2><p>下面是 Deployment 示例。创建一个 ReplicaSet 展开三个 <code>nginx</code> Pods：</p><div class=highlight><div class=includecode style=text-align:right id=controllers-nginx-deployment-yaml><a href=https://raw.githubusercontent.com/kubernetes/website/master/content/zh/examples/controllers/nginx-deployment.yaml download=controllers/nginx-deployment.yaml><code>controllers/nginx-deployment.yaml</code>
</a><img src=/images/copycode.svg style=max-height:24px;cursor:pointer onclick="copyCode('controllers-nginx-deployment-yaml')" title="Copy controllers/nginx-deployment.yaml to clipboard"></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#a2f;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apps/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>kind</span>:<span style=color:#bbb> </span>Deployment<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx-deployment<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>labels</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>replicas</span>:<span style=color:#bbb> </span><span style=color:#666>3</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>selector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#a2f;font-weight:700>template</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>labels</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>app</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#a2f;font-weight:700>spec</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#a2f;font-weight:700>containers</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span>- <span style=color:#a2f;font-weight:700>name</span>:<span style=color:#bbb> </span>nginx<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>image</span>:<span style=color:#bbb> </span>nginx:<span style=color:#666>1.14.2</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#a2f;font-weight:700>ports</span>:<span style=color:#bbb>
</span><span style=color:#bbb>        </span>- <span style=color:#a2f;font-weight:700>containerPort</span>:<span style=color:#bbb> </span><span style=color:#666>80</span><span style=color:#bbb>
</span></code></pre></div></div><p>在该例中：</p><ul><li>将创建名为 <code>nginx-deployment</code> 的 Deployment ，由 <code>.metadata.name</code> 字段指示。</li></ul><ul><li>Deployment 创建三个复制的 Pods，由 <code>replicas</code> 字段指示。</li></ul><ul><li><p><code>selector</code> 字段定义 Deployment 如何查找要管理的 Pods。
在这种情况下，只需选择在 Pod 模板（<code>app: nginx</code>）中定义的标签。但是，更复杂的选择规则是可能的，只要 Pod 模板本身满足规则。</p><blockquote class=note><div><strong>说明：</strong><pre><code>`matchLabels` 字段是 {key,value} 的映射。单个 {key,value}在 `matchLabels` 映射中的值等效于 `matchExpressions` 的元素，其键字段是“key”，运算符为“In”，值数组仅包含“value”。所有要求，从 `matchLabels` 和 `matchExpressions`，必须满足才能匹配。</code></pre></div></blockquote></li></ul><ul><li><code>template</code> 字段包含以下子字段：</li></ul><ul><li>Pod 标记为<code>app: nginx</code>，使用<code>labels</code>字段。</li></ul><ul><li>Pod 模板规范或 <code>.template.spec</code> 字段指示 Pods 运行一个容器， <code>nginx</code>，运行 <code>nginx</code> <a href=https://hub.docker.com/>Docker Hub</a>版本1.7.9的镜像 。</li></ul><ul><li>创建一个容器并使用<code>name</code>字段将其命名为 <code>nginx</code>。</li></ul><p>按照以下步骤创建上述 Deployment ：</p><p>开始之前，请确保的 Kubernetes 集群已启动并运行。</p><ol><li><p>通过运行以下命令创建 Deployment ：</p><blockquote class=note><div><strong>说明：</strong><pre><code>  可以指定 `--record` 标志来写入在资源注释`kubernetes.io/change-cause`中执行的命令。它对以后的检查是有用的。
&lt;!--
For example, to see the commands executed in each Deployment revision.
--&gt;
  例如，查看在每个 Deployment 修改中执行的命令。</code></pre></div></blockquote><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl apply -f https://k8s.io/examples/controllers/nginx-deployment.yaml
</code></pre></div></li></ol><ol start=2><li><p>运行 <code>kubectl get deployments</code> 以检查 Deployment 是否已创建。如果仍在创建 Deployment ，则输出以下内容：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span style=color:#666>3</span>         <span style=color:#666>0</span>         <span style=color:#666>0</span>            <span style=color:#666>0</span>           1s
</code></pre></div><p>检查集群中的 Deployments 时，将显示以下字段：</p><ul><li><code>NAME</code> 列出了集群中 Deployments 的名称。</li><li><code>DESIRED</code> 显示应用程序的所需 <em>副本</em> 数，在创建 Deployment 时定义这些副本。这是 <em>期望状态</em>。</li><li><code>CURRENT</code>显示当前正在运行的副本数。</li><li><code>UP-TO-DATE</code>显示已更新以实现期望状态的副本数。</li><li><code>AVAILABLE</code>显示应用程序可供用户使用的副本数。</li><li><code>AGE</code> 显示应用程序运行的时间量。</li></ul><p>请注意，根据<code>.spec.replicas</code>副本字段，所需副本的数量为 3。</p></li></ol><ol start=3><li><p>要查看 Deployment 展开状态，运行 <code>kubectl rollout status deployment.v1.apps/nginx-deployment</code>。输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Waiting <span style=color:#a2f;font-weight:700>for</span> rollout to finish: <span style=color:#666>2</span> out of <span style=color:#666>3</span> new replicas have been updated...
deployment.apps/nginx-deployment successfully rolled out
</code></pre></div></li></ol><ol start=4><li><p>几秒钟后再次运行 <code>kubectl get deployments</code>。输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>            <span style=color:#666>3</span>           18s
</code></pre></div><p>请注意， Deployment 已创建所有三个副本，并且所有副本都是最新的（它们包含最新的 Pod 模板）并且可用。</p></li></ol><ol start=5><li><p>要查看 Deployment 创建的 ReplicaSet （<code>rs</code>），运行 <code>kubectl get rs</code>。输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-75675f5897   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>       18s
</code></pre></div><p>请注意， ReplicaSet 的名称始终被格式化为<code>[DEPLOYMENT-NAME]-[RANDOM-STRING]</code>。随机字符串是随机生成并使用 pod-template-hash 作为种子。</p></li></ol><ol start=6><li><p>要查看每个 Pod 自动生成的标签，运行 <code>kubectl get pods --show-labels</code>。返回以下输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                                READY     STATUS    RESTARTS   AGE       LABELS
nginx-deployment-75675f5897-7ci7o   1/1       Running   <span style=color:#666>0</span>          18s       <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx,pod-template-hash<span style=color:#666>=</span><span style=color:#666>3123191453</span>
nginx-deployment-75675f5897-kzszj   1/1       Running   <span style=color:#666>0</span>          18s       <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx,pod-template-hash<span style=color:#666>=</span><span style=color:#666>3123191453</span>
nginx-deployment-75675f5897-qqcnn   1/1       Running   <span style=color:#666>0</span>          18s       <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx,pod-template-hash<span style=color:#666>=</span><span style=color:#666>3123191453</span>
</code></pre></div><p>创建的复制集可确保有三个 <code>nginx</code> Pods。</p></li></ol><blockquote class=note><div><strong>说明：</strong><p>必须在 Deployment 中指定适当的选择器和 Pod 模板标签（在本例中为<code>app: nginx</code>）。不要与其他控制器（包括其他 Deployments 和状态设置）重叠标签或选择器。Kubernetes 不会阻止重叠，如果多个控制器具有重叠的选择器，这些控制器可能会冲突并运行意外。</div></blockquote><h3 id=pod-template-hash-标签>Pod-template-hash 标签</h3><blockquote class=note><div><strong>说明：</strong><p>不要更改此标签。</div></blockquote><p>Deployment 控制器将 <code>pod-template-hash</code> 标签添加到 Deployment 创建或使用的每个 ReplicaSet 。</p><p>此标签可确保 Deployment 的子 ReplicaSets 不重叠。它通过对 ReplicaSet 的 <code>PodTemplate</code> 进行哈希处理，并使用生成的哈希值添加到 ReplicaSet 选择器、Pod 模板标签,并在 ReplicaSet 可能具有的任何现有 Pod 中。</p><h2 id=更新-deployment>更新 Deployment</h2><blockquote class=note><div><strong>说明：</strong><p>仅当 Deployment Pod 模板（即 <code>.spec.template</code>）时，才会触发 Deployment 展开，例如，如果模板的标签或容器镜像已更新，其他更新（如扩展 Deployment ）不会触发展开。</div></blockquote><p>按照以下步骤更新 Deployment ：</p><ol><li><p>让我们更新 nginx Pods，以使用 <code>nginx:1.9.1</code> 镜像 ，而不是 <code>nginx:1.7.9</code> 镜像 。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl --record deployment.apps/nginx-deployment <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.9.1
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment image updated
</code></pre></div><p>或者，可以 <code>edit</code> Deployment 并将 <code>.spec.template.spec.containers[0].image</code> 从 <code>nginx:1.7.9</code> 更改至 <code>nginx:1.9.1</code>。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl edit deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment edited
</code></pre></div></li></ol><ol start=2><li><p>要查看展开状态，运行：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout status deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Waiting <span style=color:#a2f;font-weight:700>for</span> rollout to finish: <span style=color:#666>2</span> out of <span style=color:#666>3</span> new replicas have been updated...
</code></pre></div><p>或者</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment successfully rolled out
</code></pre></div></li></ol><p>在更新后的 Deployment 上获取更多信息</p><ul><li><p>在展开成功后，可以通过运行 <code>kubectl get deployments</code>来查看 Deployment 。
输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>            <span style=color:#666>3</span>           36s
</code></pre></div></li></ul><ul><li><p>运行 <code>kubectl get rs</code> 以查看 Deployment 通过创建新的 ReplicaSet 并缩放它更新了 Pods 最多 3 个副本，以及将旧 ReplicaSet 缩放到 0 个副本。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-1564180365   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>       6s
nginx-deployment-2035384211   <span style=color:#666>0</span>         <span style=color:#666>0</span>         <span style=color:#666>0</span>       36s
</code></pre></div></li></ul><ul><li><p>运行 <code>get pods</code> 现在应仅显示新的 Pods:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get pods
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                                READY     STATUS    RESTARTS   AGE
nginx-deployment-1564180365-khku8   1/1       Running   <span style=color:#666>0</span>          14s
nginx-deployment-1564180365-nacti   1/1       Running   <span style=color:#666>0</span>          14s
nginx-deployment-1564180365-z9gth   1/1       Running   <span style=color:#666>0</span>          14s
</code></pre></div><p>下次要更新这些 Pods 时，只需再次更新 Deployment Pod 模板。</p><p>Deployment 可确保在更新时仅关闭一定数量的 Pods。默认情况下，它确保至少 75%所需 Pods 运行（25%最大不可用）。</p><p>Deployment 还确保仅创建一定数量的 Pods 高于期望的 Pods 数。默认情况下，它可确保最多增加 25% 期望 Pods 数（25%最大增量）。</p><p>例如，如果仔细查看上述 Deployment ，将看到它首先创建了一个新的 Pod，然后删除了一些旧的 Pods，并创建了新的 Pods。它不会杀死老 Pods，直到有足够的数量新的 Pods 已经出现，并没有创造新的 Pods，直到足够数量的旧 Pods 被杀死。它确保至少 2 个 Pods 可用，并且总共最多 4 个 Pods 可用。</p></li></ul><ul><li><p>获取 Deployment 的更多信息</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl describe deployments
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Thu, <span style=color:#666>30</span> Nov <span style=color:#666>2017</span> 10:56:25 +0000
Labels:                 <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Annotations:            deployment.kubernetes.io/revision<span style=color:#666>=</span><span style=color:#666>2</span>
Selector:               <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Replicas:               <span style=color:#666>3</span> desired | <span style=color:#666>3</span> updated | <span style=color:#666>3</span> total | <span style=color:#666>3</span> available | <span style=color:#666>0</span> unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        <span style=color:#666>0</span>
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
   Containers:
    nginx:
      Image:        nginx:1.9.1
      Port:         80/TCP
      Environment:  &lt;none&gt;
      Mounts:       &lt;none&gt;
    Volumes:        &lt;none&gt;
  Conditions:
    Type           Status  Reason
    ----           ------  ------
    Available      True    MinimumReplicasAvailable
    Progressing    True    NewReplicaSetAvailable
  OldReplicaSets:  &lt;none&gt;
  NewReplicaSet:   nginx-deployment-1564180365 <span style=color:#666>(</span>3/3 replicas created<span style=color:#666>)</span>
  Events:
    Type    Reason             Age   From                   Message
    ----    ------             ----  ----                   -------
    Normal  ScalingReplicaSet  2m    deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>3</span>
    Normal  ScalingReplicaSet  24s   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>1</span>
    Normal  ScalingReplicaSet  22s   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>2</span>
    Normal  ScalingReplicaSet  22s   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>2</span>
    Normal  ScalingReplicaSet  19s   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>1</span>
    Normal  ScalingReplicaSet  19s   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>3</span>
    Normal  ScalingReplicaSet  14s   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>0</span>
</code></pre></div><p>可以看到，当第一次创建 Deployment 时，它创建了一个 ReplicaSet （nginx-deployment-2035384211）并将其直接扩展至 3 个副本。更新 Deployment 时，它创建了一个新的 ReplicaSet （nginx-deployment-1564180365），并将其扩展为 1，然后将旧 ReplicaSet 缩小到 2，以便至少有 2 个 Pod 可用，并且最多创建 4 个 Pod。然后，它继续向上和向下扩展新的和旧的 ReplicaSet ，具有相同的滚动更新策略。最后，将有 3 个可用的副本在新的 ReplicaSet 中，旧 ReplicaSet 将缩小到 0。</p></li></ul><h3 id=翻转-多-deployment-动态更新>翻转（多 Deployment 动态更新）</h3><p>每次 Deployment 控制器观察新 Deployment 时，都会创建一个 ReplicaSet 以启动所需的 Pods。如果更新了 Deployment ，则控制其标签的 Pods 的现有 ReplicaSet 匹配 <code>.spec.selector</code>，但其模板不匹配 <code>.spec.template</code> 被缩小。最终，新的 ReplicaSet 缩放为 <code>.spec.replicas</code>，所有旧 ReplicaSets 缩放为 0。</p><p>当 Deployment 正在展开时进行更新， Deployment 会为每个更新创建一个新的 ReplicaSet 并开始向上扩展，之前的 ReplicaSet 会被添加到旧 ReplicaSets 队列并开始向下扩展。</p><p>例如，假设创建一个 Deployment 以创建 <code>nginx:1.7.9</code> 的 5 个副本，然后更新 Deployment 以创建 5 个 <code>nginx:1.9.1</code> 的副本，而此时只有 3 个<code>nginx:1.7.9</code> 的副本已创建。在这种情况下， Deployment 会立即开始杀死3个 <code>nginx:1.7.9</code> Pods，并开始创建 <code>nginx:1.9.1</code> Pods。它不等待 <code>nginx:1.7.9</code> 的 5 个副本在改变任务之前完成创建。</p><h3 id=使用标签选择器进行更新>使用标签选择器进行更新</h3><p>通常不鼓励更新标签选择器，建议提前规划选择器。在任何情况下，如果需要执行标签选择器更新，请格外小心，并确保已掌握所有的含义。</p><blockquote class=note><div><strong>说明：</strong><p>在 API 版本 <code>apps/v1</code> 中， Deployment 标签选择器在创建后是不可变的。</div></blockquote><ul><li>选择器添加还需要使用新标签更新 Deployment 规范中的 Pod 模板标签，否则将返回验证错误。此更改是非重叠的，这意味着新的选择器不选择使用旧选择器创建的 ReplicaSets 和 Pod，从而导致弃用所有旧 ReplicaSets 和创建新的 ReplicaSet 。</li><li>选择器更新更改选择器键中的现有值 -- 导致发生与添加相同的行为。</li><li>选择器删除从 Deployment 选择器中删除现有密钥 -- 不需要在Pod 模板标签做任意更改。现有 ReplicaSets 不会孤立，并且不会创建新的 ReplicaSet ，但请注意，已删除的标签仍然存在于任何现有的 Pods 和 ReplicaSets 中。</li></ul><h2 id=回滚-deployment>回滚 Deployment</h2><p>有时，可能需要回滚 Deployment ；例如，当 Deployment 不稳定时，例如循环崩溃。默认情况下，所有 Deployment 历史记录都保留在系统中，以便可以随时回滚（可以通过修改修改历史记录限制来更改该限制）。</p><blockquote class=note><div><strong>说明：</strong><p>触发 Deployment 展开时，将创建 Deployment 修改版。这意味着仅当 Deployment Pod 模板 （<code>.spec.template</code>） 发生更改时，才会创建新修改版本，例如，如果更新模板的标签或容器镜像 。其他更新，如扩展 Deployment 、不要创建 Deployment 修改版，以便方便同时手动或自动缩放。这意味着，当回滚到较早的修改版时，只有 Deployment Pod 模板部分回滚。</div></blockquote><ul><li><p>假设在更新 Deployment 时犯了一个拼写错误，将镜像名称命名为 <code>nginx:1.91</code> 而不是 <code>nginx:1.9.1</code>：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.91 --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment image updated
</code></pre></div></li></ul><ul><li><p>展开遇到问题。可以通过检查展开状态来验证它：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout status deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Waiting <span style=color:#a2f;font-weight:700>for</span> rollout to finish: <span style=color:#666>1</span> out of <span style=color:#666>3</span> new replicas have been updated...
</code></pre></div></li></ul><ul><li>按 Ctrl-C 停止上述展开状态表。有关卡住展开的详细信息，<a href=#deployment-status>参考这里</a></li></ul><ul><li><p>查看旧 ReplicaSets ：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                          DESIRED   CURRENT   READY   AGE
nginx-deployment-1564180365   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>       25s
nginx-deployment-2035384211   <span style=color:#666>0</span>         <span style=color:#666>0</span>         <span style=color:#666>0</span>       36s
nginx-deployment-3066724191   <span style=color:#666>1</span>         <span style=color:#666>1</span>         <span style=color:#666>0</span>       6s
</code></pre></div></li></ul><ul><li><p>查看创建的 Pod，看到由新 ReplicaSet 创建的 1 个 Pod 卡在镜像拉取循环中。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get pods
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                                READY     STATUS             RESTARTS   AGE
nginx-deployment-1564180365-70iae   1/1       Running            <span style=color:#666>0</span>          25s
nginx-deployment-1564180365-jbqqo   1/1       Running            <span style=color:#666>0</span>          25s
nginx-deployment-1564180365-hysrc   1/1       Running            <span style=color:#666>0</span>          25s
nginx-deployment-3066724191-08mng   0/1       ImagePullBackOff   <span style=color:#666>0</span>          6s
</code></pre></div><blockquote class=note><div><strong>说明：</strong><pre><code>Deployment 控制器自动停止不良展开，并停止向上扩展新的 ReplicaSet 。这取决于指定的滚动更新参数（具体为 `maxUnavailable`）。默认情况下，Kubernetes 将值设置为 25%。</code></pre></div></blockquote></li></ul><ul><li><p>获取 Deployment 描述信息：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl describe deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Name:           nginx-deployment
Namespace:      default
CreationTimestamp:  Tue, <span style=color:#666>15</span> Mar <span style=color:#666>2016</span> 14:48:04 -0700
Labels:         <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Selector:       <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Replicas:       <span style=color:#666>3</span> desired | <span style=color:#666>1</span> updated | <span style=color:#666>4</span> total | <span style=color:#666>3</span> available | <span style=color:#666>1</span> unavailable
StrategyType:       RollingUpdate
MinReadySeconds:    <span style=color:#666>0</span>
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
  Containers:
   nginx:
    Image:        nginx:1.91
    Port:         80/TCP
    Host Port:    0/TCP
    Environment:  &lt;none&gt;
    Mounts:       &lt;none&gt;
  Volumes:        &lt;none&gt;
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    ReplicaSetUpdated
OldReplicaSets:     nginx-deployment-1564180365 <span style=color:#666>(</span>3/3 replicas created<span style=color:#666>)</span>
NewReplicaSet:      nginx-deployment-3066724191 <span style=color:#666>(</span>1/1 replicas created<span style=color:#666>)</span>
Events:
  FirstSeen LastSeen    Count   From                    SubobjectPath   Type        Reason              Message
  --------- --------    -----   ----                    -------------   --------    ------              -------
  1m        1m          <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>3</span>
  22s       22s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>1</span>
  22s       22s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>2</span>
  22s       22s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>2</span>
  21s       21s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>1</span>
  21s       21s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-1564180365 to <span style=color:#666>3</span>
  13s       13s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-2035384211 to <span style=color:#666>0</span>
  13s       13s         <span style=color:#666>1</span>       <span style=color:#666>{</span>deployment-controller <span style=color:#666>}</span>                Normal      ScalingReplicaSet   Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-3066724191 to <span style=color:#666>1</span>
</code></pre></div><p>要解决此问题，需要回滚到以前稳定的 Deployment 版本。</p></li></ul><h3 id=检查-deployment-展开历史>检查 Deployment 展开历史</h3><p>按照如下步骤检查回滚历史：</p><ol><li><p>首先，检查 Deployment 修改历史：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout <span style=color:#a2f>history</span> deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployments <span style=color:#b44>&#34;nginx-deployment&#34;</span>
REVISION    CHANGE-CAUSE
<span style=color:#666>1</span>           kubectl apply --filename<span style=color:#666>=</span>https://k8s.io/examples/controllers/nginx-deployment.yaml --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
<span style=color:#666>2</span>           kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.9.1 --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
<span style=color:#666>3</span>           kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.91 --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
</code></pre></div><p><code>CHANGE-CAUSE</code> 从 Deployment 注释 <code>kubernetes.io/change-cause</code> 创建时复制到其修改版。可以通过以下条件指定 <code>CHANGE-CAUSE</code> 消息：</p><ul><li>使用 <code>kubectl annotate deployment.v1.apps/nginx-deployment kubernetes.io/change-cause="image updated to 1.9.1"</code> Deployment 对 Deployment 进行分号。</li><li>追加 <code>--record</code> 以保存正在更改资源的 <code>kubectl</code> 命令。</li><li>手动编辑资源的清单。</li></ul></li></ol><ol start=2><li><p>查看修改历史的详细信息，运行：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout <span style=color:#a2f>history</span> deployment.v1.apps/nginx-deployment --revision<span style=color:#666>=</span><span style=color:#666>2</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployments <span style=color:#b44>&#34;nginx-deployment&#34;</span> revision <span style=color:#666>2</span>
  Labels:       <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
          pod-template-hash<span style=color:#666>=</span><span style=color:#666>1159050644</span>
  Annotations:  kubernetes.io/change-cause<span style=color:#666>=</span>kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.9.1 --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
  Containers:
   nginx:
    Image:      nginx:1.9.1
    Port:       80/TCP
     QoS Tier:
        cpu:      BestEffort
        memory:   BestEffort
    Environment Variables:      &lt;none&gt;
  No volumes.
</code></pre></div></li></ol><h3 id=回滚到上一次修改>回滚到上一次修改</h3><p>按照下面给出的步骤将 Deployment 从当前版本回滚到以前的版本（即版本 2）。</p><ol><li><p>现在已决定撤消当前展开并回滚到以前的版本：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout undo deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment
</code></pre></div><p>或者，可以通过使用 <code>--to-revision</code> 来回滚到特定修改版本：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout undo deployment.v1.apps/nginx-deployment --to-revision<span style=color:#666>=</span><span style=color:#666>2</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment
</code></pre></div><p>更多有关回滚相关指令，请参考 <a href=/docs/reference/generated/kubectl/kubectl-commands#rollout><code>kubectl rollout</code></a>.</p><p>现在， Deployment 将回滚到以前的稳定版本。如所见， Deployment 回滚事件回滚到修改版 2 是从 Deployment 控制器生成的。</p></li></ol><ol start=2><li><p>检查回滚是否成功、 Deployment 是否正在运行，运行：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get deployment nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>            <span style=color:#666>3</span>           30m
</code></pre></div></li></ol><ol start=3><li><p>获取 Deployment 描述信息：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl describe deployment nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Name:                   nginx-deployment
Namespace:              default
CreationTimestamp:      Sun, <span style=color:#666>02</span> Sep <span style=color:#666>2018</span> 18:17:55 -0500
Labels:                 <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Annotations:            deployment.kubernetes.io/revision<span style=color:#666>=</span><span style=color:#666>4</span>
                        kubernetes.io/change-cause<span style=color:#666>=</span>kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.9.1 --record<span style=color:#666>=</span><span style=color:#a2f>true</span>
Selector:               <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
Replicas:               <span style=color:#666>3</span> desired | <span style=color:#666>3</span> updated | <span style=color:#666>3</span> total | <span style=color:#666>3</span> available | <span style=color:#666>0</span> unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        <span style=color:#666>0</span>
RollingUpdateStrategy:  25% max unavailable, 25% max surge
Pod Template:
  Labels:  <span style=color:#b8860b>app</span><span style=color:#666>=</span>nginx
  Containers:
   nginx:
    Image:        nginx:1.9.1
    Port:         80/TCP
    Host Port:    0/TCP
    Environment:  &lt;none&gt;
    Mounts:       &lt;none&gt;
  Volumes:        &lt;none&gt;
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
  Progressing    True    NewReplicaSetAvailable
OldReplicaSets:  &lt;none&gt;
NewReplicaSet:   nginx-deployment-c4747d96c <span style=color:#666>(</span>3/3 replicas created<span style=color:#666>)</span>
Events:
  Type    Reason              Age   From                   Message
  ----    ------              ----  ----                   -------
  Normal  ScalingReplicaSet   12m   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-75675f5897 to <span style=color:#666>3</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-c4747d96c to <span style=color:#666>1</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-75675f5897 to <span style=color:#666>2</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-c4747d96c to <span style=color:#666>2</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-75675f5897 to <span style=color:#666>1</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-c4747d96c to <span style=color:#666>3</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-75675f5897 to <span style=color:#666>0</span>
  Normal  ScalingReplicaSet   11m   deployment-controller  Scaled up replica <span style=color:#a2f>set</span> nginx-deployment-595696685f to <span style=color:#666>1</span>
  Normal  DeploymentRollback  15s   deployment-controller  Rolled back deployment <span style=color:#b44>&#34;nginx-deployment&#34;</span> to revision <span style=color:#666>2</span>
  Normal  ScalingReplicaSet   15s   deployment-controller  Scaled down replica <span style=color:#a2f>set</span> nginx-deployment-595696685f to <span style=color:#666>0</span>
</code></pre></div></li></ol><h2 id=缩放-deployment>缩放 Deployment</h2><p>可以使用如下指令缩放 Deployment ：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl scale deployment.v1.apps/nginx-deployment --replicas<span style=color:#666>=</span><span style=color:#666>10</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment scaled
</code></pre></div><p>假设启用<a href=/zh/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/>水平自动缩放 Pod</a>在集群中，可以为 Deployment 设置自动缩放器，并选择最小和最大
要基于现有 Pods 的 CPU 利用率运行的 Pods。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl autoscale deployment.v1.apps/nginx-deployment --min<span style=color:#666>=</span><span style=color:#666>10</span> --max<span style=color:#666>=</span><span style=color:#666>15</span> --cpu-percent<span style=color:#666>=</span><span style=color:#666>80</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment scaled
</code></pre></div><h3 id=比例缩放>比例缩放</h3><p>滚动更新 Deployments 支持同时运行应用程序的多个版本。当自动缩放器缩放处于展开中间的滚动更新 Deployment （仍在进行中或暂停）时， Deployment 控制器平衡现有活动中的其他 ReplicaSets （带 Pods 的 ReplicaSets ），以降低风险。这称为比例缩放。</p><p>例如，运行一个10个副本的 Deployment ，<a href=#max-surge>最大增加</a>=3， <a href=#max-unavailable>最大不可用</a>=2.</p><ul><li><p>确保这10个副本都在运行。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get deploy
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment     <span style=color:#666>10</span>        <span style=color:#666>10</span>        <span style=color:#666>10</span>           <span style=color:#666>10</span>          50s
</code></pre></div></li></ul><ul><li><p>更新到新镜像，该镜像恰好无法从集群内部解析。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:sometag
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment image updated
</code></pre></div></li></ul><ul><li><p>镜像更新使用 ReplicaSet nginx-deployment-1989198191 启动新的展开，但由于上面提到的最大不可用要求。检查展开状态：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><pre><code>输出：
</code></pre><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-1989198191   <span style=color:#666>5</span>         <span style=color:#666>5</span>         <span style=color:#666>0</span>         9s
nginx-deployment-618515232    <span style=color:#666>8</span>         <span style=color:#666>8</span>         <span style=color:#666>8</span>         1m
</code></pre></div></li></ul><ul><li>然后，出现了新的 Deployment 扩展请求。自动缩放器增加 Deployment 副本到15。 Deployment 控制器需要决定在何处添加这些新 5 个副本。如果未使用比例缩放，所有 5 个都将添加到新的 ReplicaSet 中。使用比例缩放，可以将其他副本分布到所有 ReplicaSets 。更大的比例转到 ReplicaSets 与大多数副本和较低的比例都转到副本较少的 ReplicaSets 。任何剩余部分都添加到具有最多副本的 ReplicaSet 。具有零副本的 ReplicaSets 不会放大。</li></ul><p>在上面的示例中，3 个副本添加到旧 ReplicaSet 中，2 个副本添加到新 ReplicaSet 。展开过程最终应将所有副本移动到新的 ReplicaSet ，假定新的副本变得正常。要确认这一点，请运行：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get deploy
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                 DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx-deployment     <span style=color:#666>15</span>        <span style=color:#666>18</span>        <span style=color:#666>7</span>            <span style=color:#666>8</span>           7m
</code></pre></div><p>展开状态确认副本如何添加到每个 ReplicaSet 。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME                          DESIRED   CURRENT   READY     AGE
nginx-deployment-1989198191   <span style=color:#666>7</span>         <span style=color:#666>7</span>         <span style=color:#666>0</span>         7m
nginx-deployment-618515232    <span style=color:#666>11</span>        <span style=color:#666>11</span>        <span style=color:#666>11</span>        7m
</code></pre></div><h2 id=暂停-恢复-deployment>暂停、恢复 Deployment</h2><p>可以在触发一个或多个更新之前暂停 Deployment ，然后继续它。这允许在暂停和恢复之间应用多个修补程序，而不会触发不必要的 Deployment 。</p><ul><li><p>例如，对于一个刚刚创建的 Deployment ：
获取 Deployment 信息：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get deploy
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME      DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
nginx     <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>            <span style=color:#666>3</span>           1m
</code></pre></div><p>获取 Deployment 状态：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>         1m
</code></pre></div><p>使用如下指令中断运行：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout pause deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment paused
</code></pre></div></li></ul><ul><li><p>然后更新 Deployment 镜像：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl <span style=color:#a2f>set</span> image deployment.v1.apps/nginx-deployment <span style=color:#b8860b>nginx</span><span style=color:#666>=</span>nginx:1.9.1
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment image updated
</code></pre></div></li></ul><ul><li><p>注意没有新的展开：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout <span style=color:#a2f>history</span> deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployments <span style=color:#b44>&#34;nginx&#34;</span>
REVISION  CHANGE-CAUSE
<span style=color:#666>1</span>   &lt;none&gt;
</code></pre></div></li></ul><ul><li><p>获取展开状态确保 Deployment 更新已经成功：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>         2m
</code></pre></div></li></ul><ul><li><p>更新是很容易的，例如，可以这样更新使用到的资源：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl <span style=color:#a2f>set</span> resources deployment.v1.apps/nginx-deployment -c<span style=color:#666>=</span>nginx --limits<span style=color:#666>=</span><span style=color:#b8860b>cpu</span><span style=color:#666>=</span>200m,memory<span style=color:#666>=</span>512Mi
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment resource requirements updated
</code></pre></div><p>暂停 Deployment 之前的初始状态将继续其功能，但新的更新只要暂停 Deployment ， Deployment 就不会产生任何效果。</p></li></ul><ul><li><p>最后，恢复 Deployment 并观察新的 ReplicaSet ，并更新所有新的更新：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout resume deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment resumed
</code></pre></div></li></ul><ul><li><p>观察展开的状态，直到完成。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs -w
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   <span style=color:#666>2</span>         <span style=color:#666>2</span>         <span style=color:#666>2</span>         2m
nginx-3926361531   <span style=color:#666>2</span>         <span style=color:#666>2</span>         <span style=color:#666>0</span>         6s
nginx-3926361531   <span style=color:#666>2</span>         <span style=color:#666>2</span>         <span style=color:#666>1</span>         18s
nginx-2142116321   <span style=color:#666>1</span>         <span style=color:#666>2</span>         <span style=color:#666>2</span>         2m
nginx-2142116321   <span style=color:#666>1</span>         <span style=color:#666>2</span>         <span style=color:#666>2</span>         2m
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>2</span>         <span style=color:#666>1</span>         18s
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>2</span>         <span style=color:#666>1</span>         18s
nginx-2142116321   <span style=color:#666>1</span>         <span style=color:#666>1</span>         <span style=color:#666>1</span>         2m
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>1</span>         18s
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>2</span>         19s
nginx-2142116321   <span style=color:#666>0</span>         <span style=color:#666>1</span>         <span style=color:#666>1</span>         2m
nginx-2142116321   <span style=color:#666>0</span>         <span style=color:#666>1</span>         <span style=color:#666>1</span>         2m
nginx-2142116321   <span style=color:#666>0</span>         <span style=color:#666>0</span>         <span style=color:#666>0</span>         2m
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>         20s
</code></pre></div></li></ul><ul><li><p>获取最近展开的状态：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl get rs
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>NAME               DESIRED   CURRENT   READY     AGE
nginx-2142116321   <span style=color:#666>0</span>         <span style=color:#666>0</span>         <span style=color:#666>0</span>         2m
nginx-3926361531   <span style=color:#666>3</span>         <span style=color:#666>3</span>         <span style=color:#666>3</span>         28s
</code></pre></div></li></ul><blockquote class=note><div><strong>说明：</strong><p>暂停的 Deployment 不可以回滚，除非恢复它以后。</div></blockquote><h2 id=deployment-状态>Deployment 状态</h2><p>一个 Deployment 的生命周期中会有许多状态。当正在生产新的 ReplicaSet 时可能是<a href=#progressing-deployment>正在运行</a>，可能是<a href=#complete-deployment>已完成</a>，也可能是<a href=#failed-deployment> Deployment 失败</a>。</p><h3 id=正在-deployment>正在 Deployment</h3><p>Kubernetes 使用 <em>运行中</em> 来标记一个 Deployment ，当下面的任务被执行时：</p><ul><li>创建新的 ReplicaSet 。</li><li>正在向上扩展最新的 ReplicaSet 。</li><li>Deployment 向下扩展旧的 ReplicaSet(s) 。</li><li>新的 Pods 已经就绪或者可用（在<a href=#min-ready-seconds>最小就绪时间</a>内就绪）。</li></ul><p>可以使用 <code>kubectl rollout status</code> 监视 Deployment 的进度。</p><h3 id=完成-deployment>完成 Deployment</h3><p>Kubernetes 将 Deployment 标记为 <em>完成</em>，当它具有以下特征时：</p><ul><li>与 Deployment 关联的所有副本都已更新到指定的最新版本，这意味着请求的任何更新都已完成。</li></ul><ul><li>与 Deployment 关联的所有副本都可用。</li></ul><ul><li>未运行 Deployment 的旧副本。</li></ul><p>可以使用 <code>kubectl rollout status</code> 检查 Deployment 是否已完成。如果展开成功完成，<code>kubectl rollout status</code> 返回退出代码 0。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout status deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Waiting <span style=color:#a2f;font-weight:700>for</span> rollout to finish: <span style=color:#666>2</span> of <span style=color:#666>3</span> updated replicas are available...
deployment.apps/nginx-deployment successfully rolled out
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$?</span>
<span style=color:#666>0</span>
</code></pre></div><h3 id=deployment-失败>Deployment 失败</h3><p>你的 Deployment 可能会在未完成的情况下尝试 Deployment 其最新的 ReplicaSet 时遇到问题。可能发生此情况由于以下一些因素：</p><ul><li>配额不足</li><li>就绪探测失败</li><li>镜像拉取错误</li><li>权限不足</li><li>限制范围</li><li>应用程序运行时配置错误</li></ul><p>检测此条件的一种方法是在 Deployment 规范中指定截止时间参数：（[<code>.spec.progressDeadlineSeconds</code>]（#progress-deadline-seconds））。<code>.spec.progressDeadlineSeconds</code> 进度截止时间秒表示 Deployment 控制器在指示（处于 Deployment 状态）之前等待的秒数 Deployment 进度已停止。</p><p>以下 <code>kubectl</code> 命令设置具有进度的规范，使控制器报告 10 分钟后 Deployment 进度不足：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl patch deployment.v1.apps/nginx-deployment -p <span style=color:#b44>&#39;{&#34;spec&#34;:{&#34;progressDeadlineSeconds&#34;:600}}&#39;</span>
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>deployment.apps/nginx-deployment patched
</code></pre></div><p>超过截止时间后， Deployment 控制器将添加具有以下属性到 Deployment 的 <code>.status.conditions</code> ：</p><ul><li>Type=Progressing</li><li>Status=False</li><li>Reason=ProgressDeadlineExceeded</li></ul><p>参考 <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#typical-status-properties>Kubernetes API 约定</a> 获取更多状态条件相关信息。</p><blockquote class=note><div><strong>说明：</strong><p>Kubernetes 对已停止的 Deployment 不执行任何操作，只需使用<code>Reason=ProgressDeadlineExceeded</code>。更高级别的编排器可以利用它并相应地采取行动，例如，将 Deployment 回滚到其以前的版本。</div></blockquote><blockquote class=note><div><strong>说明：</strong><p>如果暂停 Deployment ，Kubernetes 不会根据指定的截止时间检查进度。可以在展开栏中间安全地暂停 Deployment ，并在不触发超过最后期限时恢复。</div></blockquote><p>Deployments 可能会出现短暂的错误，既不是因为设置的超时时间过短，也不是因为任何真正的暂时性错误。例如配额不足。如果描述 Deployment ，将注意到以下部分：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl describe deployment nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&lt;...&gt;
Conditions:
  Type            Status  Reason
  ----            ------  ------
  Available       True    MinimumReplicasAvailable
  Progressing     True    ReplicaSetUpdated
  ReplicaFailure  True    FailedCreate
&lt;...&gt;
</code></pre></div><p>如果运行 <code>kubectl get deployment nginx-deployment -o yaml</code>， Deployment 状态输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>status:
  availableReplicas: <span style=color:#666>2</span>
  conditions:
  - lastTransitionTime: 2016-10-04T12:25:39Z
    lastUpdateTime: 2016-10-04T12:25:39Z
    message: Replica <span style=color:#a2f>set</span> <span style=color:#b44>&#34;nginx-deployment-4262182780&#34;</span> is progressing.
    reason: ReplicaSetUpdated
    status: <span style=color:#b44>&#34;True&#34;</span>
    type: Progressing
  - lastTransitionTime: 2016-10-04T12:25:42Z
    lastUpdateTime: 2016-10-04T12:25:42Z
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: <span style=color:#b44>&#34;True&#34;</span>
    type: Available
  - lastTransitionTime: 2016-10-04T12:25:39Z
    lastUpdateTime: 2016-10-04T12:25:39Z
    message: <span style=color:#b44>&#39;Error creating: pods &#34;nginx-deployment-4262182780-&#34; is forbidden: exceeded quota:
</span><span style=color:#b44>      object-counts, requested: pods=1, used: pods=3, limited: pods=2&#39;</span>
    reason: FailedCreate
    status: <span style=color:#b44>&#34;True&#34;</span>
    type: ReplicaFailure
  observedGeneration: <span style=color:#666>3</span>
  replicas: <span style=color:#666>2</span>
  unavailableReplicas: <span style=color:#666>2</span>
</code></pre></div><p>最终，一旦超过 Deployment 进度截止时间，Kubernetes 将更新状态和进度状态：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Conditions:
  Type            Status  Reason
  ----            ------  ------
  Available       True    MinimumReplicasAvailable
  Progressing     False   ProgressDeadlineExceeded
  ReplicaFailure  True    FailedCreate
</code></pre></div><p>可以通过缩减 Deployment 来解决配额不足的问题，或者直接在命名空间中增加配额。如果配额条件满足， Deployment 控制器完成了 Deployment 展开， Deployment 状态会更新为成功（<code>Status=True</code> and <code>Reason=NewReplicaSetAvailable</code>）。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Conditions:
  Type          Status  Reason
  ----          ------  ------
  Available     True    MinimumReplicasAvailable
  Progressing   True    NewReplicaSetAvailable
</code></pre></div><p><code>Type=Available</code>和 <code>Status=True</code> 表示 Deployment 具有最低可用性。最低可用性由 Deployment 策略中的参数指定。<code>Type=Progressing</code> 和 <code>Status=True</code> 表示 Deployment 处于展开中间，并且正在运行，或者已成功完成进度，最小所需新的副本处于可用（请参阅此种状态原因的相关细节，在我们的案例中<code>Reason=NewReplicaSetAvailable</code> 表示 Deployment 已完成）。</p><p>可以使用 <code>kubectl rollout status</code> 检查 Deployment 是否未能取得进展。<code>kubectl rollout status</code>如果 Deployment 已超过进度截止时间，则返回非零退出代码。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>kubectl rollout status deployment.v1.apps/nginx-deployment
</code></pre></div><p>输出：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Waiting <span style=color:#a2f;font-weight:700>for</span> rollout to finish: <span style=color:#666>2</span> out of <span style=color:#666>3</span> new replicas have been updated...
error: deployment <span style=color:#b44>&#34;nginx&#34;</span> exceeded its progress deadline
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$?</span>
<span style=color:#666>1</span>
</code></pre></div><h3 id=对失败-deployment-的操作>对失败 Deployment 的操作</h3><p>应用于完整 Deployment 的所有操作也适用于失败的 Deployment 。可以向上/向下扩展，回滚到以前的修改版，或者如果需要在 Deployment Pod 模板中应用多个调整，甚至将其暂停。</p><h2 id=清理策略>清理策略</h2><p>可以在 Deployment 中设置 <code>.spec.revisionHistoryLimit</code> ，以指定保留多少此 Deployment 的 ReplicaSets。其余的将在后台进行垃圾回收。默认情况下，是10。</p><blockquote class=note><div><strong>说明：</strong><p>显式将此字段设置为 0 将导致清理 Deployment 的所有历史记录，因此 Deployment 将无法回滚。</div></blockquote><h2 id=金丝雀-deployment>金丝雀 Deployment</h2><p>如果要使用 Deployment 向用户或服务器子集展开版本，则可以创建多个 Deployments ，每个版本一个，遵循<a href=/zh/docs/concepts/cluster-administration/manage-deployment/#canary-deployments>资源管理</a>。</p><h2 id=编写-deployment-脚本>编写 Deployment 脚本</h2><p>同其他 Kubernetes 配置， Deployment 需要 <code>apiVersion</code>， <code>kind</code>， 和 <code>metadata</code> 字段。有关配置文件的其他信息，参考 <a href=/zh/docs/tasks/run-application/run-stateless-application-deployment/>应用 Deployment </a>，配置容器，和 <a href=/zh/docs/concepts/overview/working-with-objects/object-management/>使用 kubectl 管理资源</a> 相关文档。</p><p>Deployment 还需要 <a href=https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status><code>.spec</code> 部分</a>。</p><h3 id=pod-示例>Pod 示例</h3><p><code>.spec</code>仅需要 <code>.spec.template</code> 和 <code>.spec.selector</code>。</p><p><code>.spec.template</code> 是一个 <a href=/zh/docs/concepts/workloads/pods/#pod-templates>Pod 示例</a>。它和 <a href=/zh/docs/concepts/workloads/pods>Pod</a>的约束完全相同，除了它是嵌套的，而且没有 <code>apiVersion</code> 或 <code>kind</code>。</p><p>除了 Pod 的必填字段外， Deployment 中的 Pod 模板必须指定适当的标签和适当的重新启动策略。对于标签，请确保不要与其他控制器重叠。请参考<a href=#selector>选择器</a>)。</p><p>只有 <a href=/zh/docs/concepts/workloads/pods/pod-lifecycle/#restart-policy><code>.spec.template.spec.restartPolicy</code></a> 等于 <code>Always</code> 被允许，这是在没有指定时的默认设置。</p><h3 id=副本>副本</h3><p><code>.spec.replicas</code> 是指定所需 Pod 的可选字段。它的默认值是1。</p><h3 id=选择器>选择器</h3><p><code>.spec.selector</code> 是指定本次 Deployment Pods <a href=/zh/docs/concepts/overview/working-with-objects/labels/>标签选择器</a>的必要字段。</p><p><code>.spec.selector</code> 必须匹配 <code>.spec.template.metadata.labels</code>，否则请求会被 API 拒绝。</p><p>在 API <code>apps/v1</code>版本中，<code>.spec.selector</code> 和 <code>.metadata.labels</code> 不会被默认设置为 <code>.spec.template.metadata.labels</code>，如果没有设置的话。所以需要明确进行设置。同时在 <code>apps/v1</code>版本中， Deployment 创建后 <code>.spec.selector</code> 是可变的。</p><p>当 Pods 的标签和选择器匹配时，此类 Pods 的模板和 <code>.spec.template</code> 不同，或者此类 Pods 的总数超过 <code>.spec.replicas</code>， Deployment 会终结这些 Pods。如果 Pods 总数达不到期望值，会用 <code>.spec.template</code> 创建新的 Pods。</p><blockquote class=note><div><strong>说明：</strong><p>不应创建其标签与此选择器匹配的 Pods，或者直接创建另一个 Deployment ，或通过创建其他控制器（如 ReplicaSet 或复制控制器）。如果这样做，第一个 Deployment 认为它创建了这些其他 Pods。Kubernetes 不会阻止你这么做。</div></blockquote><p>如果有多个具有重叠选择器的控制器，则控制器之间会因冲突而故障。</p><h3 id=策略>策略</h3><p><code>.spec.strategy</code> 策略指定用于用新 Pods 替换旧 Pods 的策略。<code>.spec.strategy.type</code> 可以是“Recreate”或“RollingUpdate”。“RollingUpdate”是默认值。</p><h4 id=重新创建-deployment>重新创建 Deployment</h4><p>当 <code>.spec.strategy.type==Recreate</code>,所有现有的 Pods 在创建新 Pods 之前被杀死。</p><h4 id=滚动更新-deployment>滚动更新 Deployment</h4><p>Deployment 会在 <code>.spec.strategy.type==RollingUpdate</code>时，采取滚动更新的方式更新Pods。可以指定 <code>maxUnavailable</code> 和 <code>maxSurge</code> 来控制滚动更新操作。</p><h5 id=最大不可用>最大不可用</h5><p><code>.spec.strategy.rollingUpdate.maxUnavailable</code> 是指定最大数量的可选字段，表示在更新过程中不可用的 Pods。该值可以是绝对数字（例如，5）或所需 Pods 的百分比（例如，10%）。绝对数按百分比计算，四舍五入下来。如果 <code>.spec.strategy.rollingUpdate.maxSurge</code> 为 0，则该值不能为 0。默认值为 25%。</p><p>例如，当此值设置为 30% 时，滚动更新开始时会立即将旧 ReplicaSet 向下扩展到期望 Pods 的70%。新 Pods 准备就绪后，可以缩放旧 ReplicaSet 进一步向下，然后向上扩展新的 ReplicaSet ，确保可用的 Pods 总数在更新期间，任何时候都至少为 70% 所需的 Pods。</p><h5 id=最大增量>最大增量</h5><p><code>.spec.strategy.rollingUpdate.maxSurge</code> 是指定最大 Pods 数的可选字段可在所需的 Pods 数上创建。该值可以是绝对数（例如，5）或所需 Pods 的百分比（例如，10%）。如果 <code>MaxUnavailable</code> 0，则值不能为 0。绝对数通过舍入从百分比计算。默认值为 25%。</p><p>例如，当此值设置为 30% 时，启动滚动更新后，会立即展开新的 ReplicaSet ，以便新旧 Pod 的总数不超过所需的 130%。一旦旧 Pods 被杀死，新的 ReplicaSet 可以进一步扩展，确保更新期间任何时间运行的 Pods 总数最多为所需 Pods 总数的130%。</p><h3 id=deployment-失败等待时间>Deployment 失败等待时间</h3><p><code>.spec.progressDeadlineSeconds</code> 是一个可选字段，用于指定等待的秒数而后在系统报告中返回<a href=#failed-deployment> Deployment 失败</a>，同时在资源状态中 <code>Type=Progressing</code>、 <code>Status=False</code> 、 <code>Reason=ProgressDeadlineExceeded</code> 。 Deployment 控制器将保留正在重试 Deployment 。将来，一旦实现自动回滚， Deployment 控制器将回滚 Deployment ，只要它探测到这样的条件。</p><p>如果指定，则此字段需要大于 <code>.spec.minReadySeconds</code>。</p><h3 id=最小就绪时间>最小就绪时间</h3><p><code>.spec.minReadySeconds</code> 是一个可选字段，用于指定新创建的 Pod 在没有任意容器崩溃情况下的最小就绪时间，以便将其视为可用。默认值为 0（Pod 在准备就绪后立即将被视为可用）。了解有关何时Pod 被视为已准备就绪，参考<a href=/zh/docs/concepts/workloads/pods/pod-lifecycle/#container-probes>容器探针</a>。</p><h3 id=回滚>回滚</h3><p><code>.spec.rollbackTo</code> 字段已经在 API 版本 <code>extensions/v1beta1</code> 和 <code>apps/v1beta1</code>中废弃了，并且从 <code>apps/v1beta2</code>版本开始不在支持。相应的，会开始使用已经引入<a href=#rolling-back-to-a-previous-revision>回滚到上一个版本</a>中的 <code>kubectl rollout undo</code>。</p><h3 id=修改历史限制>修改历史限制</h3><p>Deployment 修改历史记录存储在它所控制的 ReplicaSets 中。</p><p><code>.spec.revisionHistoryLimit</code> 修改历史记录限制是一个可选字段，用于指定要保留的旧 ReplicaSets 的数量以允许回滚。这些旧 ReplicaSets 消耗 etcd 中的资源，并占用 <code>kubectl get rs</code> 的输出。每个 Deployment 修改版的配置都存储在其 ReplicaSets 中；因此，一旦删除了旧的 ReplicaSet ，将失去回滚到 Deployment 版本的能力。默认情况下，将保留 10 个旧 ReplicaSets ，但其理想值取决于新 Deployment 的频率和稳定性。</p><p>更具体地说，将此字段设置为 0 意味着将清理所有具有 0 个副本的旧 ReplicaSets 。在这种情况下，无法撤消新的 Deployment 展开，因为它的修改历史被清除了。</p><h3 id=暂停>暂停</h3><p><code>.spec.paused</code> 是用于暂停和恢复 Deployment 的可选布尔字段。暂停的 Deployment 和未暂停的 Deployment 唯一的区别，只要暂停 Deployment 处于暂停状态， PodTemplateSpec 的任意修改都不会触发新的展开。默认 Deployment 在创建时是不会被暂停的。</p><h2 id=deployments-的替代方案>Deployments 的替代方案</h2><h3 id=kubectl滚动更新>kubectl滚动更新</h3><p><a href=/docs/reference/generated/kubectl/kubectl-commands#rolling-update><code>kubectl rolling update</code></a>更新 Pods 和副本控制器的方式类似。但是，建议采取 Deployments 的方式来更新，因为它们是声明性的，在服务器端，并且具有其他功能，例如，即使在滚动更新完成后，也会回滚到以前的任何修改版本。</p><div id=pre-footer><h2>反馈</h2><p class=feedback--prompt>此页是否对您有帮助？</p><button class="btn btn-primary mb-4 feedback--yes">是</button>
<button class="btn btn-primary mb-4 feedback--no">否</button><p class="feedback--response feedback--response__hidden">感谢反馈。如果您有一个关于如何使用 Kubernetes 的特定的、需要答案的问题，可以访问
<a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/kubernetes>Stack Overflow</a>.
在 GitHub 仓库上登记新的问题
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">报告问题</a>
或者
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">提出改进建议</a>.</p></div><script>const yes=document.querySelector('.feedback--yes');const no=document.querySelector('.feedback--no');document.querySelectorAll('.feedback--link').forEach(link=>{link.href=link.href+window.location.pathname;});const sendFeedback=(value)=>{if(!gtag){console.log('!gtag');}
gtag('event','click',{'event_category':'Helpful','event_label':window.location.pathname,value});};const disableButtons=()=>{yes.disabled=true;yes.classList.add('feedback--button__disabled');no.disabled=true;no.classList.add('feedback--button__disabled');};yes.addEventListener('click',()=>{sendFeedback(1);disableButtons();document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');});no.addEventListener('click',()=>{sendFeedback(0);disableButtons();document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');});</script><div id=pre-footer><hr><div class=issue-button-container><script type=text/javascript>PDRTJS_settings_8345992={"id":"8345992","unique_id":"\/zh\/docs\/concepts\/workloads\/controllers\/deployment\/","title":"Deployments","permalink":"https:\/\/kubernetes.io\/zh\/docs\/concepts\/workloads\/controllers\/deployment\/"};(function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=("https:"==document.location.protocol)?"https://polldaddy.com/js/rating/rating.js":"http://i0.poll.fm/js/rating/rating.js";s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,"script","pd-rating-js"));</script><a class="btn btn-primary mb-4 issue" href onclick="window.open('https://github.com/kubernetes/website/issues/new?template=bug-report.md&title=Issue%20with%20'+
'k8s.io'+window.location.pathname)">报告 GitHub 问题</a>
<a class="btn btn-primary mb-4 issue" href=https://github.com/kubernetes/website/edit/master/content/zh/docs/concepts/workloads/controllers/deployment.md>修改本页面</a></div><div class="lastedit issue-button-container" id=lastedit>页面最后一次修改于
August 12, 2020 at 7:26 PM PST
由：
<a href=https://github.com/kubernetes/website/commit/11cc9e007af0ceac61e4947819ad99f5b9da4d3a/>[zh] fix links in concept section</a>
(<a href=https://github.com/kubernetes/website/commits/master/content/en/docs/concepts/workloads/controllers/deployment.md>页面历史</a>)</div></div></main><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><nav id=TableOfContents><ul><li><a href=#用例>用例</a></li><li><a href=#创建-deployment>创建 Deployment</a><ul><li><a href=#pod-template-hash-标签>Pod-template-hash 标签</a></li></ul></li><li><a href=#更新-deployment>更新 Deployment</a><ul><li><a href=#翻转-多-deployment-动态更新>翻转（多 Deployment 动态更新）</a></li><li><a href=#使用标签选择器进行更新>使用标签选择器进行更新</a></li></ul></li><li><a href=#回滚-deployment>回滚 Deployment</a><ul><li><a href=#检查-deployment-展开历史>检查 Deployment 展开历史</a></li><li><a href=#回滚到上一次修改>回滚到上一次修改</a></li></ul></li><li><a href=#缩放-deployment>缩放 Deployment</a><ul><li><a href=#比例缩放>比例缩放</a></li></ul></li><li><a href=#暂停-恢复-deployment>暂停、恢复 Deployment</a></li><li><a href=#deployment-状态>Deployment 状态</a><ul><li><a href=#正在-deployment>正在 Deployment</a></li><li><a href=#完成-deployment>完成 Deployment</a></li><li><a href=#deployment-失败>Deployment 失败</a></li><li><a href=#对失败-deployment-的操作>对失败 Deployment 的操作</a></li></ul></li><li><a href=#清理策略>清理策略</a></li><li><a href=#金丝雀-deployment>金丝雀 Deployment</a></li><li><a href=#编写-deployment-脚本>编写 Deployment 脚本</a><ul><li><a href=#pod-示例>Pod 示例</a></li><li><a href=#副本>副本</a></li><li><a href=#选择器>选择器</a></li><li><a href=#策略>策略</a></li><li><a href=#deployment-失败等待时间>Deployment 失败等待时间</a></li><li><a href=#最小就绪时间>最小就绪时间</a></li><li><a href=#回滚>回滚</a></li><li><a href=#修改历史限制>修改历史限制</a></li><li><a href=#暂停>暂停</a></li></ul></li><li><a href=#deployments-的替代方案>Deployments 的替代方案</a><ul><li><a href=#kubectl滚动更新>kubectl滚动更新</a></li></ul></li></ul></nav></div></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh/docs/home/>主页</a>
<a class=text-white href=/zh/blog/>博客</a>
<a class=text-white href=/zh/training/>培训</a>
<a class=text-white href=/zh/partners/>合作伙伴</a>
<a class=text-white href=/zh/community/>社区</a>
<a class=text-white href=/zh/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.4c88b9704d4f4a0c299df9314d9912a9d1b77eed43f42923d7e1efd15c8ed139.js integrity="sha256-TIi5cE1PSgwpnfkxTZkSqdG3fu1D9Ckj1+Hv0VyO0Tk=" crossorigin=anonymous></script></body></html>